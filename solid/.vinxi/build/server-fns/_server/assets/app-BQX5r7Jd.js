import{createComponent as h,isServer as U,getRequestEvent as F,delegateEvents as B,ssr as k,ssrHydrationKey as P,escape as q}from"solid-js/web";import{M as D,T as K}from"./index-BdnVf8ln.js";import{F as N}from"./server-fns-B2uura8-.js";import{children as _,createMemo as L,getOwner as H,untrack as M,Show as T,on as W,createRoot as V,createSignal as $,onCleanup as I,sharedConfig as R,Suspense as J}from"solid-js";import{c as z,d as G,R as Q,g as X,e as Y,f as x,h as Z,s as C,m as tt,i as et,j as rt,k as nt,l as at,n as ot}from"./action-MDRJH-bI.js";import"solid-js/web/storage";import"./fetchEvent-DZma46F8.js";import"h3";import"node:async_hooks";const j=t=>r=>{const{base:a}=r,n=_(()=>r.children),e=L(()=>z(n(),r.base||""));let i;const c=G(t,e,()=>i,{base:a,singleFlight:r.singleFlight,transformUrl:r.transformUrl});return t.create&&t.create(c),h(Q.Provider,{value:c,get children(){return h(st,{routerState:c,get root(){return r.root},get preload(){return r.rootPreload||r.rootLoad},get children(){return[(i=H())&&null,h(it,{routerState:c,get branches(){return e()}})]}})}})};function st(t){const r=t.routerState.location,a=t.routerState.params,n=L(()=>t.preload&&M(()=>{C(!0),t.preload({params:a,location:r,intent:X()||"initial"}),C(!1)}));return h(T,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:e=>h(e,{params:a,location:r,get data(){return n()},get children(){return t.children}})})}function it(t){if(U){const e=F();if(e&&e.router&&e.router.dataOnly){ct(e,t.routerState,t.branches);return}e&&((e.router||(e.router={})).matches||(e.router.matches=t.routerState.matches().map(({route:i,path:c,params:m})=>({path:i.originalPath,pattern:i.pattern,match:c,params:m,info:i.info}))))}const r=[];let a;const n=L(W(t.routerState.matches,(e,i,c)=>{let m=i&&e.length===i.length;const f=[];for(let l=0,w=e.length;l<w;l++){const b=i&&i[l],g=e[l];c&&b&&g.route.key===b.route.key?f[l]=c[l]:(m=!1,r[l]&&r[l](),V(v=>{r[l]=v,f[l]=Y(t.routerState,f[l-1]||t.routerState.base,O(()=>n()[l+1]),()=>t.routerState.matches()[l])}))}return r.splice(e.length).forEach(l=>l()),c&&m?c:(a=f[0],f)}));return O(()=>n()&&a)()}const O=t=>()=>h(T,{get when(){return t()},keyed:!0,children:r=>h(Z.Provider,{value:r,get children(){return r.outlet()}})});function ct(t,r,a){const n=new URL(t.request.url),e=x(a,new URL(t.router.previousUrl||t.request.url).pathname),i=x(a,n.pathname);for(let c=0;c<i.length;c++){(!e[c]||i[c].route!==e[c].route)&&(t.router.dataOnly=!0);const{route:m,params:f}=i[c];m.preload&&m.preload({params:f,location:r.location,intent:"preload"})}}function ut([t,r],a,n){return[t,n?e=>r(n(e)):r]}function lt(t){let r=!1;const a=e=>typeof e=="string"?{value:e}:e,n=ut($(a(t.get()),{equals:(e,i)=>e.value===i.value&&e.state===i.state}),void 0,e=>(!r&&t.set(e),R.registry&&!R.done&&(R.done=!0),e));return t.init&&I(t.init((e=t.get())=>{r=!0,n[1](a(e)),r=!1})),j({signal:n,create:t.create,utils:t.utils})}function dt(t,r,a){return t.addEventListener(r,a),()=>t.removeEventListener(r,a)}function ht(t,r){const a=t&&document.getElementById(t);a?a.scrollIntoView():r&&window.scrollTo(0,0)}function ft(t){const r=new URL(t);return r.pathname+r.search}function mt(t){let r;const a={value:t.url||(r=F())&&ft(r.request.url)||""};return j({signal:[()=>a,n=>Object.assign(a,n)]})(t)}function gt(t=!0,r=!1,a="/_server",n){return e=>{const i=e.base.path(),c=e.navigatorFactory(e.base);let m,f;function l(o){return o.namespaceURI==="http://www.w3.org/2000/svg"}function w(o){if(o.defaultPrevented||o.button!==0||o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)return;const s=o.composedPath().find(E=>E instanceof Node&&E.nodeName.toUpperCase()==="A");if(!s||r&&!s.hasAttribute("link"))return;const d=l(s),u=d?s.href.baseVal:s.href;if((d?s.target.baseVal:s.target)||!u&&!s.hasAttribute("state"))return;const p=(s.getAttribute("rel")||"").split(/\s+/);if(s.hasAttribute("download")||p&&p.includes("external"))return;const y=d?new URL(u,document.baseURI):new URL(u);if(!(y.origin!==window.location.origin||i&&y.pathname&&!y.pathname.toLowerCase().startsWith(i.toLowerCase())))return[s,y]}function b(o){const s=w(o);if(!s)return;const[d,u]=s,A=e.parsePath(u.pathname+u.search+u.hash),p=d.getAttribute("state");o.preventDefault(),c(A,{resolve:!1,replace:d.hasAttribute("replace"),scroll:!d.hasAttribute("noscroll"),state:p?JSON.parse(p):void 0})}function g(o){const s=w(o);if(!s)return;const[d,u]=s;n&&(u.pathname=n(u.pathname)),e.preloadRoute(u,d.getAttribute("preload")!=="false")}function v(o){clearTimeout(m);const s=w(o);if(!s)return f=null;const[d,u]=s;f!==d&&(n&&(u.pathname=n(u.pathname)),m=setTimeout(()=>{e.preloadRoute(u,d.getAttribute("preload")!=="false"),f=d},20))}function S(o){if(o.defaultPrevented)return;let s=o.submitter&&o.submitter.hasAttribute("formaction")?o.submitter.getAttribute("formaction"):o.target.getAttribute("action");if(!s)return;if(!s.startsWith("https://action/")){const u=new URL(s,tt);if(s=e.parsePath(u.pathname+u.search),!s.startsWith(a))return}if(o.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const d=et.get(s);if(d){o.preventDefault();const u=new FormData(o.target,o.submitter);d.call({r:e,f:o.target},o.target.enctype==="multipart/form-data"?u:new URLSearchParams(u))}}B(["click","submit"]),document.addEventListener("click",b),t&&(document.addEventListener("mousemove",v,{passive:!0}),document.addEventListener("focusin",g,{passive:!0}),document.addEventListener("touchstart",g,{passive:!0})),document.addEventListener("submit",S),I(()=>{document.removeEventListener("click",b),t&&(document.removeEventListener("mousemove",v),document.removeEventListener("focusin",g),document.removeEventListener("touchstart",g)),document.removeEventListener("submit",S)})}}function wt(t){if(U)return mt(t);const r=()=>{const n=window.location.pathname.replace(/^\/+/,"/")+window.location.search,e=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:n+window.location.hash,state:e}},a=rt();return lt({get:r,set({value:n,replace:e,scroll:i,state:c}){e?window.history.replaceState(nt(c),"",n):window.history.pushState(c,"",n),ht(decodeURIComponent(window.location.hash.slice(1)),i),at()},init:n=>dt(window,"popstate",ot(n,e=>{if(e&&e<0)return!a.confirm(e);{const i=r();return!a.confirm(i.value,{state:i.state})}})),create:gt(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:n=>window.history.go(n),beforeLeave:a}})(t)}var bt=["<nav",' class="flex items-center justify-between flex-wrap bg-gray-800 p-4 shadow-md"><div class="text-white font-bold text-xl">MyApp</div><div class="space-x-4"><a href="/" class="text-gray-300 hover:text-white transition-colors">Home</a><a href="/about" class="text-gray-300 hover:text-white transition-colors">About</a></div></nav>'],pt=["<div",">","</div>"];function vt(t){return[k(bt,P()),k(pt,P(),q(t.children))]}function Ct(){return h(wt,{root:t=>h(D,{get children(){return[h(K,{children:"SolidStart - Basic"}),h(vt,{get children(){return h(J,{get children(){return t.children}})}})]}}),get children(){return h(N,{})}})}export{Ct as default};
