import{h as re,e as te,i as K,t as W,q as $,k as E,b as I,S as ae,a as ne,r as se,T as ie}from"./index-CLQ8J1qU.js";import{i as oe,u as ue,j as le}from"./action-r4Rt8Pat.js";var ce=(e=>(e[e.AggregateError=1]="AggregateError",e[e.ArrowFunction=2]="ArrowFunction",e[e.ErrorPrototypeStack=4]="ErrorPrototypeStack",e[e.ObjectAssign=8]="ObjectAssign",e[e.BigIntTypedArray=16]="BigIntTypedArray",e[e.AbortSignal=32]="AbortSignal",e))(ce||{});function fe(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"	":return"\\t";case"\f":return"\\f";case"<":return"\\x3C";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return}}function h(e){let r="",a=0,n;for(let s=0,i=e.length;s<i;s++)n=fe(e[s]),n&&(r+=e.slice(a,s)+n,a=s+1);return a===0?r=e:r+=e.slice(a),r}var g="__SEROVAL_REFS__";function q(e,r){if(!e)throw r}var H=new Map,w=new Map;function X(e){return H.has(e)}function pe(e){return q(X(e),new Ye(e)),H.get(e)}typeof globalThis<"u"?Object.defineProperty(globalThis,g,{value:w,configurable:!0,writable:!1,enumerable:!1}):typeof window<"u"?Object.defineProperty(window,g,{value:w,configurable:!0,writable:!1,enumerable:!1}):typeof self<"u"?Object.defineProperty(self,g,{value:w,configurable:!0,writable:!1,enumerable:!1}):typeof global<"u"&&Object.defineProperty(global,g,{value:w,configurable:!0,writable:!1,enumerable:!1});function G(e,r){for(let a=0,n=r.length;a<n;a++){let s=r[a];e.has(s)||(e.add(s),s.extends&&G(e,s.extends))}}function de(e){if(e){let r=new Set;return G(r,e),[...r]}}function he(e){e(this.reason)}function ye(e){this.addEventListener("abort",he.bind(this,e),{once:!0})}function be(e){return new Promise(ye.bind(e))}var J={[Symbol.asyncIterator]:0,[Symbol.hasInstance]:1,[Symbol.isConcatSpreadable]:2,[Symbol.iterator]:3,[Symbol.match]:4,[Symbol.matchAll]:5,[Symbol.replace]:6,[Symbol.search]:7,[Symbol.species]:8,[Symbol.split]:9,[Symbol.toPrimitive]:10,[Symbol.toStringTag]:11,[Symbol.unscopables]:12},me={0:"Error",1:"EvalError",2:"RangeError",3:"ReferenceError",4:"SyntaxError",5:"TypeError",6:"URIError"},t=void 0;function l(e,r,a,n,s,i,u,o,c,p,f,y){return{t:e,i:r,s:a,l:n,c:s,m:i,p:u,e:o,a:c,f:p,b:f,o:y}}function d(e){return l(2,t,e,t,t,t,t,t,t,t,t,t)}var T=d(2),C=d(3),ge=d(1),we=d(0),ve=d(4),Se=d(5),Ee=d(6),xe=d(7);function _(e){return e instanceof EvalError?1:e instanceof RangeError?2:e instanceof ReferenceError?3:e instanceof SyntaxError?4:e instanceof TypeError?5:e instanceof URIError?6:0}function Re(e){let r=me[_(e)];return e.name!==r?{name:e.name}:e.constructor.name!==r?{name:e.constructor.name}:{}}function j(e,r){let a=Re(e),n=Object.getOwnPropertyNames(e);for(let s=0,i=n.length,u;s<i;s++)u=n[s],u!=="name"&&u!=="message"&&(u==="stack"?r&4&&(a=a||{},a[u]=e[u]):(a=a||{},a[u]=e[u]));return a}function Y(e){return Object.isFrozen(e)?3:Object.isSealed(e)?2:Object.isExtensible(e)?0:1}function ze(e){switch(e){case Number.POSITIVE_INFINITY:return Se;case Number.NEGATIVE_INFINITY:return Ee}return e!==e?xe:Object.is(e,-0)?ve:l(0,t,e,t,t,t,t,t,t,t,t,t)}function U(e){return l(1,t,h(e),t,t,t,t,t,t,t,t,t)}function Ae(e){return l(3,t,""+e,t,t,t,t,t,t,t,t,t)}function $e(e){return l(4,e,t,t,t,t,t,t,t,t,t,t)}function Ie(e,r){return l(5,e,r.toISOString(),t,t,t,t,t,t,t,t,t)}function _e(e,r){return l(6,e,t,t,h(r.source),r.flags,t,t,t,t,t,t)}function ke(e,r){let a=new Uint8Array(r),n=a.length,s=new Array(n);for(let i=0;i<n;i++)s[i]=a[i];return l(19,e,s,t,t,t,t,t,t,t,t,t)}function Fe(e,r){return l(17,e,J[r],t,t,t,t,t,t,t,t,t)}function Pe(e,r){return l(18,e,h(pe(r)),t,t,t,t,t,t,t,t,t)}function Oe(e,r,a){return l(25,e,a,t,h(r),t,t,t,t,t,t,t)}function Te(e,r,a){return l(9,e,t,r.length,t,t,t,t,a,t,t,Y(r))}function Ce(e,r){return l(21,e,t,t,t,t,t,t,t,r,t,t)}function je(e,r,a){return l(15,e,t,r.length,r.constructor.name,t,t,t,t,a,r.byteOffset,t)}function Ue(e,r,a){return l(16,e,t,r.length,r.constructor.name,t,t,t,t,a,r.byteOffset,t)}function Me(e,r,a){return l(20,e,t,r.byteLength,t,t,t,t,t,a,r.byteOffset,t)}function Ne(e,r,a){return l(13,e,_(r),t,t,h(r.message),a,t,t,t,t,t)}function Le(e,r,a){return l(14,e,_(r),t,t,h(r.message),a,t,t,t,t,t)}function De(e,r,a){return l(7,e,t,r,t,t,t,t,a,t,t,t)}function Be(e,r){return l(28,t,t,t,t,t,t,t,[e,r],t,t,t)}function Ve(e,r){return l(30,t,t,t,t,t,t,t,[e,r],t,t,t)}function Ke(e,r,a){return l(31,e,t,t,t,t,t,t,a,r,t,t)}function We(e,r){return l(32,e,t,t,t,t,t,t,t,r,t,t)}function qe(e,r){return l(33,e,t,t,t,t,t,t,t,r,t,t)}function He(e,r){return l(34,e,t,t,t,t,t,t,t,r,t,t)}var{toString:k}=Object.prototype;function Xe(e,r){return r instanceof Error?`Seroval caught an error during the ${e} process.
  
${r.name}
${r.message}

- For more information, please check the "cause" property of this error.
- If you believe this is an error in Seroval, please submit an issue at https://github.com/lxsmnsyc/seroval/issues/new`:`Seroval caught an error during the ${e} process.

"${k.call(r)}"

For more information, please check the "cause" property of this error.`}var Ge=class extends Error{constructor(r,a){super(Xe(r,a)),this.cause=a}},Je=class extends Ge{constructor(r){super("parsing",r)}},S=class extends Error{constructor(r){super(`The value ${k.call(r)} of type "${typeof r}" cannot be parsed/serialized.
      
There are few workarounds for this problem:
- Transform the value in a way that it can be serialized.
- If the reference is present on multiple runtimes (isomorphic), you can use the Reference API to map the references.`),this.value=r}},Ye=class extends Error{constructor(e){super('Missing reference for the value "'+k.call(e)+'" of type "'+typeof e+'"'),this.value=e}},Qe=class{constructor(e,r){this.value=e,this.replacement=r}},Ze={},er={},rr={0:{},1:{},2:{},3:{},4:{},5:{},6:{}};function tr(e){return"__SEROVAL_STREAM__"in e}function F(){let e=new Set,r=[],a=!0,n=!0;function s(o){for(let c of e.keys())c.next(o)}function i(o){for(let c of e.keys())c.throw(o)}function u(o){for(let c of e.keys())c.return(o)}return{__SEROVAL_STREAM__:!0,on(o){a&&e.add(o);for(let c=0,p=r.length;c<p;c++){let f=r[c];c===p-1&&!a?n?o.return(f):o.throw(f):o.next(f)}return()=>{a&&e.delete(o)}},next(o){a&&(r.push(o),s(o))},throw(o){a&&(r.push(o),i(o),a=!1,n=!1,e.clear())},return(o){a&&(r.push(o),u(o),a=!1,n=!0,e.clear())}}}function ar(e){let r=F(),a=e[Symbol.asyncIterator]();async function n(){try{let s=await a.next();s.done?r.return(s.value):(r.next(s.value),await n())}catch(s){r.throw(s)}}return n().catch(()=>{}),r}function nr(e){let r=[],a=-1,n=-1,s=e[Symbol.iterator]();for(;;)try{let i=s.next();if(r.push(i.value),i.done){n=r.length-1;break}}catch(i){a=r.length,r.push(i)}return{v:r,t:a,d:n}}async function sr(e){try{return[1,await e]}catch(r){return[0,r]}}var ir=class{constructor(r){this.marked=new Set,this.plugins=r.plugins,this.features=47^(r.disabledFeatures||0),this.refs=r.refs||new Map}markRef(r){this.marked.add(r)}isMarked(r){return this.marked.has(r)}getIndexedValue(r){let a=this.refs.get(r);if(a!=null)return this.markRef(a),{type:1,value:$e(a)};let n=this.refs.size;return this.refs.set(r,n),{type:0,value:n}}getReference(r){let a=this.getIndexedValue(r);return a.type===1?a:X(r)?{type:2,value:Pe(a.value,r)}:a}parseWellKnownSymbol(r){let a=this.getReference(r);return a.type!==0?a.value:(q(r in J,new S(r)),Fe(a.value,r))}parseSpecialReference(r){let a=this.getIndexedValue(rr[r]);return a.type===1?a.value:l(26,a.value,r,t,t,t,t,t,t,t,t,t)}parseIteratorFactory(){let r=this.getIndexedValue(Ze);return r.type===1?r.value:l(27,r.value,t,t,t,t,t,t,t,this.parseWellKnownSymbol(Symbol.iterator),t,t)}parseAsyncIteratorFactory(){let r=this.getIndexedValue(er);return r.type===1?r.value:l(29,r.value,t,t,t,t,t,t,[this.parseSpecialReference(1),this.parseWellKnownSymbol(Symbol.asyncIterator)],t,t,t)}createObjectNode(r,a,n,s){return l(n?11:10,r,t,t,t,t,s,t,t,t,t,Y(a))}createMapNode(r,a,n,s){return l(8,r,t,t,t,t,t,{k:a,v:n,s},t,this.parseSpecialReference(0),t,t)}createPromiseConstructorNode(r){return l(22,r,t,t,t,t,t,t,t,this.parseSpecialReference(1),t,t)}createAbortSignalConstructorNode(r){return l(35,r,t,t,t,t,t,t,t,this.parseSpecialReference(5),t,t)}},or=class extends ir{async parseItems(e){let r=[];for(let a=0,n=e.length;a<n;a++)a in e&&(r[a]=await this.parse(e[a]));return r}async parseArray(e,r){return Te(e,r,await this.parseItems(r))}async parseProperties(e){let r=Object.entries(e),a=[],n=[];for(let i=0,u=r.length;i<u;i++)a.push(h(r[i][0])),n.push(await this.parse(r[i][1]));let s=Symbol.iterator;return s in e&&(a.push(this.parseWellKnownSymbol(s)),n.push(Be(this.parseIteratorFactory(),await this.parse(nr(e))))),s=Symbol.asyncIterator,s in e&&(a.push(this.parseWellKnownSymbol(s)),n.push(Ve(this.parseAsyncIteratorFactory(),await this.parse(ar(e))))),s=Symbol.toStringTag,s in e&&(a.push(this.parseWellKnownSymbol(s)),n.push(U(e[s]))),s=Symbol.isConcatSpreadable,s in e&&(a.push(this.parseWellKnownSymbol(s)),n.push(e[s]?T:C)),{k:a,v:n,s:a.length}}async parsePlainObject(e,r,a){return this.createObjectNode(e,r,a,await this.parseProperties(r))}async parseBoxed(e,r){return Ce(e,await this.parse(r.valueOf()))}async parseTypedArray(e,r){return je(e,r,await this.parse(r.buffer))}async parseBigIntTypedArray(e,r){return Ue(e,r,await this.parse(r.buffer))}async parseDataView(e,r){return Me(e,r,await this.parse(r.buffer))}async parseError(e,r){let a=j(r,this.features);return Ne(e,r,a?await this.parseProperties(a):t)}async parseAggregateError(e,r){let a=j(r,this.features);return Le(e,r,a?await this.parseProperties(a):t)}async parseMap(e,r){let a=[],n=[];for(let[s,i]of r.entries())a.push(await this.parse(s)),n.push(await this.parse(i));return this.createMapNode(e,a,n,r.size)}async parseSet(e,r){let a=[];for(let n of r.keys())a.push(await this.parse(n));return De(e,r.size,a)}async parsePromise(e,r){let[a,n]=await sr(r);return l(12,e,a,t,t,t,t,t,t,await this.parse(n),t,t)}async parsePlugin(e,r){let a=this.plugins;if(a)for(let n=0,s=a.length;n<s;n++){let i=a[n];if(i.parse.async&&i.test(r))return Oe(e,i.tag,await i.parse.async(r,this,{id:e}))}return t}async parseStream(e,r){return Ke(e,this.parseSpecialReference(4),await new Promise((a,n)=>{let s=[],i=r.on({next:u=>{this.markRef(e),this.parse(u).then(o=>{s.push(We(e,o))},o=>{n(o),i()})},throw:u=>{this.markRef(e),this.parse(u).then(o=>{s.push(qe(e,o)),a(s),i()},o=>{n(o),i()})},return:u=>{this.markRef(e),this.parse(u).then(o=>{s.push(He(e,o)),a(s),i()},o=>{n(o),i()})}})}))}async parseAbortSignalSync(e,r){return l(37,e,t,t,t,t,t,t,t,await this.parse(r.reason),t,t)}async parseAbortSignal(e,r){return r.aborted||await be(r),this.parseAbortSignalSync(e,r)}async parseObject(e,r){if(Array.isArray(r))return this.parseArray(e,r);if(tr(r))return this.parseStream(e,r);let a=r.constructor;if(a===Qe)return this.parse(r.replacement);let n=await this.parsePlugin(e,r);if(n)return n;switch(a){case Object:return this.parsePlainObject(e,r,!1);case t:return this.parsePlainObject(e,r,!0);case Date:return Ie(e,r);case RegExp:return _e(e,r);case Error:case EvalError:case RangeError:case ReferenceError:case SyntaxError:case TypeError:case URIError:return this.parseError(e,r);case Number:case Boolean:case String:case BigInt:return this.parseBoxed(e,r);case ArrayBuffer:return ke(e,r);case Int8Array:case Int16Array:case Int32Array:case Uint8Array:case Uint16Array:case Uint32Array:case Uint8ClampedArray:case Float32Array:case Float64Array:return this.parseTypedArray(e,r);case DataView:return this.parseDataView(e,r);case Map:return this.parseMap(e,r);case Set:return this.parseSet(e,r)}if(a===Promise||r instanceof Promise)return this.parsePromise(e,r);let s=this.features;if(s&32&&typeof AbortSignal<"u"&&a===AbortSignal)return this.parseAbortSignal(e,r);if(s&16)switch(a){case BigInt64Array:case BigUint64Array:return this.parseBigIntTypedArray(e,r)}if(s&1&&typeof AggregateError<"u"&&(a===AggregateError||r instanceof AggregateError))return this.parseAggregateError(e,r);if(r instanceof Error)return this.parseError(e,r);if(Symbol.iterator in r||Symbol.asyncIterator in r)return this.parsePlainObject(e,r,!!a);throw new S(r)}async parseFunction(e){let r=this.getReference(e);if(r.type!==0)return r.value;let a=await this.parsePlugin(r.value,e);if(a)return a;throw new S(e)}async parse(e){try{switch(typeof e){case"boolean":return e?T:C;case"undefined":return ge;case"string":return U(e);case"number":return ze(e);case"bigint":return Ae(e);case"object":{if(e){let r=this.getReference(e);return r.type===0?await this.parseObject(r.value,e):r.value}return we}case"symbol":return this.parseWellKnownSymbol(e);case"function":return this.parseFunction(e);default:throw new S(e)}}catch(r){throw new Je(r)}}},ur=class extends or{constructor(){super(...arguments),this.mode="vanilla"}};function lr(e){return(0,eval)(e)}async function Q(e,r={}){let a=de(r.plugins),n=new ur({plugins:a,disabledFeatures:r.disabledFeatures});return{t:await n.parse(e),f:n.features,m:Array.from(n.marked)}}function x(e){return{detail:e.detail,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var cr={tag:"seroval-plugins/web/CustomEvent",test(e){return typeof CustomEvent>"u"?!1:e instanceof CustomEvent},parse:{sync(e,r){return{type:r.parse(e.type),options:r.parse(x(e))}},async async(e,r){return{type:await r.parse(e.type),options:await r.parse(x(e))}},stream(e,r){return{type:r.parse(e.type),options:r.parse(x(e))}}},serialize(e,r){return"new CustomEvent("+r.serialize(e.type)+","+r.serialize(e.options)+")"},deserialize(e,r){return new CustomEvent(r.deserialize(e.type),r.deserialize(e.options))}},fr=cr,pr={tag:"seroval-plugins/web/DOMException",test(e){return typeof DOMException>"u"?!1:e instanceof DOMException},parse:{sync(e,r){return{name:r.parse(e.name),message:r.parse(e.message)}},async async(e,r){return{name:await r.parse(e.name),message:await r.parse(e.message)}},stream(e,r){return{name:r.parse(e.name),message:r.parse(e.message)}}},serialize(e,r){return"new DOMException("+r.serialize(e.message)+","+r.serialize(e.name)+")"},deserialize(e,r){return new DOMException(r.deserialize(e.message),r.deserialize(e.name))}},dr=pr;function R(e){return{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var hr={tag:"seroval-plugins/web/Event",test(e){return typeof Event>"u"?!1:e instanceof Event},parse:{sync(e,r){return{type:r.parse(e.type),options:r.parse(R(e))}},async async(e,r){return{type:await r.parse(e.type),options:await r.parse(R(e))}},stream(e,r){return{type:r.parse(e.type),options:r.parse(R(e))}}},serialize(e,r){return"new Event("+r.serialize(e.type)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Event(r.deserialize(e.type),r.deserialize(e.options))}},yr=hr,br={tag:"seroval-plugins/web/File",test(e){return typeof File>"u"?!1:e instanceof File},parse:{async async(e,r){return{name:await r.parse(e.name),options:await r.parse({type:e.type,lastModified:e.lastModified}),buffer:await r.parse(await e.arrayBuffer())}}},serialize(e,r){return"new File(["+r.serialize(e.buffer)+"],"+r.serialize(e.name)+","+r.serialize(e.options)+")"},deserialize(e,r){return new File([r.deserialize(e.buffer)],r.deserialize(e.name),r.deserialize(e.options))}},mr=br;function z(e){let r=[];return e.forEach((a,n)=>{r.push([n,a])}),r}var b={},gr={tag:"seroval-plugins/web/FormDataFactory",test(e){return e===b},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,r){return r.createEffectfulFunction(["e","f","i","s","t"],"f=new FormData;for(i=0,s=e.length;i<s;i++)f.append((t=e[i])[0],t[1]);return f")},deserialize(){return b}},wr={tag:"seroval-plugins/web/FormData",extends:[mr,gr],test(e){return typeof FormData>"u"?!1:e instanceof FormData},parse:{sync(e,r){return{factory:r.parse(b),entries:r.parse(z(e))}},async async(e,r){return{factory:await r.parse(b),entries:await r.parse(z(e))}},stream(e,r){return{factory:r.parse(b),entries:r.parse(z(e))}}},serialize(e,r){return"("+r.serialize(e.factory)+")("+r.serialize(e.entries)+")"},deserialize(e,r){let a=new FormData,n=r.deserialize(e.entries);for(let s=0,i=n.length;s<i;s++){let u=n[s];a.append(u[0],u[1])}return a}},vr=wr;function A(e){let r=[];return e.forEach((a,n)=>{r.push([n,a])}),r}var Sr={tag:"seroval-plugins/web/Headers",test(e){return typeof Headers>"u"?!1:e instanceof Headers},parse:{sync(e,r){return r.parse(A(e))},async async(e,r){return await r.parse(A(e))},stream(e,r){return r.parse(A(e))}},serialize(e,r){return"new Headers("+r.serialize(e)+")"},deserialize(e,r){return new Headers(r.deserialize(e))}},P=Sr,m={},Er={tag:"seroval-plugins/web/ReadableStreamFactory",test(e){return e===m},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,r){return r.createFunction(["d"],"new ReadableStream({start:"+r.createEffectfulFunction(["c"],"d.on({next:"+r.createEffectfulFunction(["v"],"c.enqueue(v)")+",throw:"+r.createEffectfulFunction(["v"],"c.error(v)")+",return:"+r.createEffectfulFunction([],"c.close()")+"})")+"})")},deserialize(){return m}};function M(e){let r=F(),a=e.getReader();async function n(){try{let s=await a.read();s.done?r.return(s.value):(r.next(s.value),await n())}catch(s){r.throw(s)}}return n().catch(()=>{}),r}var xr={tag:"seroval/plugins/web/ReadableStream",extends:[Er],test(e){return typeof ReadableStream>"u"?!1:e instanceof ReadableStream},parse:{sync(e,r){return{factory:r.parse(m),stream:r.parse(F())}},async async(e,r){return{factory:await r.parse(m),stream:await r.parse(M(e))}},stream(e,r){return{factory:r.parse(m),stream:r.parse(M(e))}}},serialize(e,r){return"("+r.serialize(e.factory)+")("+r.serialize(e.stream)+")"},deserialize(e,r){let a=r.deserialize(e.stream);return new ReadableStream({start(n){a.on({next(s){n.enqueue(s)},throw(s){n.error(s)},return(){n.close()}})}})}},O=xr;function N(e,r){return{body:r,cache:e.cache,credentials:e.credentials,headers:e.headers,integrity:e.integrity,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var Rr={tag:"seroval-plugins/web/Request",extends:[O,P],test(e){return typeof Request>"u"?!1:e instanceof Request},parse:{async async(e,r){return{url:await r.parse(e.url),options:await r.parse(N(e,e.body?await e.clone().arrayBuffer():null))}},stream(e,r){return{url:r.parse(e.url),options:r.parse(N(e,e.clone().body))}}},serialize(e,r){return"new Request("+r.serialize(e.url)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Request(r.deserialize(e.url),r.deserialize(e.options))}},zr=Rr;function L(e){return{headers:e.headers,status:e.status,statusText:e.statusText}}var Ar={tag:"seroval-plugins/web/Response",extends:[O,P],test(e){return typeof Response>"u"?!1:e instanceof Response},parse:{async async(e,r){return{body:await r.parse(e.body?await e.clone().arrayBuffer():null),options:await r.parse(L(e))}},stream(e,r){return{body:r.parse(e.clone().body),options:r.parse(L(e))}}},serialize(e,r){return"new Response("+r.serialize(e.body)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Response(r.deserialize(e.body),r.deserialize(e.options))}},$r=Ar,Ir={tag:"seroval-plugins/web/URLSearchParams",test(e){return typeof URLSearchParams>"u"?!1:e instanceof URLSearchParams},parse:{sync(e,r){return r.parse(e.toString())},async async(e,r){return await r.parse(e.toString())},stream(e,r){return r.parse(e.toString())}},serialize(e,r){return"new URLSearchParams("+r.serialize(e)+")"},deserialize(e,r){return new URLSearchParams(r.deserialize(e))}},_r=Ir,kr={tag:"seroval-plugins/web/URL",test(e){return typeof URL>"u"?!1:e instanceof URL},parse:{sync(e,r){return r.parse(e.href)},async async(e,r){return await r.parse(e.href)},stream(e,r){return r.parse(e.href)}},serialize(e,r){return"new URL("+r.serialize(e)+")"},deserialize(e,r){return new URL(r.deserialize(e))}},Fr=kr;class Pr{reader;buffer;done;constructor(r){this.reader=r.getReader(),this.buffer=new Uint8Array(0),this.done=!1}async readChunk(){const r=await this.reader.read();if(r.done)this.done=!0;else{let a=new Uint8Array(this.buffer.length+r.value.length);a.set(this.buffer),a.set(r.value,this.buffer.length),this.buffer=a}}async next(){if(this.buffer.length===0)return this.done?{done:!0,value:void 0}:(await this.readChunk(),await this.next());const r=new TextDecoder().decode(this.buffer.subarray(1,11)),a=Number.parseInt(r,16);for(;a>this.buffer.length-12;){if(this.done)throw new Error("Malformed server function stream.");await this.readChunk()}const n=new TextDecoder().decode(this.buffer.subarray(12,12+a));return this.buffer=this.buffer.subarray(12+a),{done:!1,value:lr(n)}}async drain(){for(;!(await this.next()).done;);}}async function D(e,r){if(!r.body)throw new Error("missing body");const a=new Pr(r.body),n=await a.next();return n.done||a.drain().then(()=>{delete $R[e]},()=>{}),n.value}let Or=0;function v(e,r,a,n){return fetch(e,{method:"POST",...n,headers:{...n.headers,"X-Server-Id":r,"X-Server-Instance":a}})}const Z=[fr,dr,yr,vr,P,O,zr,$r,_r,Fr];async function B(e,r,a,n){const s=`server-fn:${Or++}`,i=await(n.length===0?v(e,r,s,a):n.length===1&&n[0]instanceof FormData?v(e,r,s,{...a,body:n[0]}):n.length===1&&n[0]instanceof URLSearchParams?v(e,r,s,{...a,body:n[0],headers:{...a.headers,"Content-Type":"application/x-www-form-urlencoded"}}):v(e,r,s,{...a,body:JSON.stringify(await Promise.resolve(Q(n,{plugins:Z}))),headers:{...a.headers,"Content-Type":"application/json"}}));if(i.headers.has("Location")||i.headers.has("X-Revalidate")||i.headers.has("X-Single-Flight"))return i.body&&(i.customBody=()=>D(s,i)),i;const u=i.headers.get("Content-Type");let o;if(u&&u.startsWith("text/plain")?o=await i.text():u&&u.startsWith("application/json")?o=await i.json():o=await D(s,i),i.headers.has("X-Error"))throw o;return o}function Tr(e,r,a){const n="";return new Proxy(e,{get(s,i,u){if(i==="url")return`${n}/_server?id=${encodeURIComponent(r)}&name=${encodeURIComponent(a)}`;if(i==="GET")return u.withOptions({method:"GET"});if(i==="withOptions"){const o=`${n}/_server/?id=${encodeURIComponent(r)}&name=${encodeURIComponent(a)}`;return c=>{const p=async(...f)=>{const y=c.method&&c.method.toUpperCase()==="GET";return B(y?o+(f.length?`&args=${encodeURIComponent(JSON.stringify(await Promise.resolve(Q(f,{plugins:Z}))))}`:""):`${n}/_server`,`${r}#${a}`,c,y?[]:f)};return p.url=o,p}}return s[i]},apply(s,i,u){return B(`${n}/_server`,`${r}#${a}`,{},u)}})}const Cr=Tr(()=>{},"src_backend_ts--foo_action","/var/home/v/lab/solid/src/backend.ts?tsr-directive-use-server="),V=oe(Cr);var jr=W('<button class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow transition-all duration-200 focus:outline-none focus:ring focus:ring-blue-300"type=button>Clicks: <!$><!/> <!$><!/>');function Ur(){const[e,r]=te(0),a=ue(V);a(0);const n=le(V);return(()=>{var s=K(jr),i=s.firstChild,u=i.nextSibling,[o,c]=$(u.nextSibling),p=o.nextSibling,f=p.nextSibling,[y,ee]=$(f.nextSibling);return s.$$click=()=>{r(e()+1),a(e())},E(s,e,o,c),E(s,I(ae,{get when(){return n.result},get children(){return["blicks: ",ne(()=>n.result)," "]}}),y,ee),se(),s})()}re(["click"]);var Mr=W('<main class="max-w-4xl mx-auto p-6 md:p-10 lg:p-16 bg-white dark:bg-gray-900 rounded-2xl shadow-lg mt-10"><!$><!/><h1 class="text-4xl md:text-5xl font-extrabold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-600">Hello world!</h1><div class="mb-6 p-4 border border-dashed border-gray-300 rounded-lg hover:shadow transition-shadow duration-300"></div><p class="text-lg leading-relaxed text-gray-700 dark:text-gray-300">Visit <a href=https://start.solidjs.com target=_blank class="text-blue-600 hover:text-blue-800 underline font-medium">start.solidjs.com</a> to learn how to build SolidStart apps.');function qr(){return(()=>{var e=K(Mr),r=e.firstChild,[a,n]=$(r.nextSibling),s=a.nextSibling,i=s.nextSibling;return E(e,I(ie,{children:"Hello World"}),a,n),E(i,I(Ur,{})),e})()}export{qr as default};
