var bn=Object.defineProperty;var Vt=e=>{throw TypeError(e)};var xn=(e,t,r)=>t in e?bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var w=(e,t,r)=>xn(e,typeof t!="symbol"?t+"":t,r),yt=(e,t,r)=>t.has(e)||Vt("Cannot "+r);var c=(e,t,r)=>(yt(e,t,"read from private field"),r?r.call(e):t.get(e)),O=(e,t,r)=>t.has(e)?Vt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),E=(e,t,r,n)=>(yt(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),S=(e,t,r)=>(yt(e,t,"access private method"),r);var Gt=(e,t,r,n)=>({set _(s){E(e,t,s,r)},get _(){return c(e,t,n)}});import{AsyncLocalStorage as On}from"node:async_hooks";function Rn(){const{process:e,Deno:t}=globalThis;return!(typeof(t==null?void 0:t.noColor)=="boolean"?t.noColor:e!==void 0?"NO_COLOR"in(e==null?void 0:e.env):!1)}var _t="__COMPOSED_HANDLER",Sr=e=>e.length>1,jr=e=>e[_t]?jr(e[_t]):e,Pn=e=>e.name||(Sr(e)?"[middleware]":"[handler]"),Sn=e=>e.routes.map(({path:t,method:r,handler:n})=>{const s=jr(n);return{path:t,method:r,name:Pn(s),isMiddleware:Sr(s)}}),jn=(e,t)=>{const r=Rn(),n={};let s=0,i=0;Sn(e).filter(({isMiddleware:o})=>!o).map(o=>{const a=`${o.method}-${o.path}`;if((n[a]||(n[a]=[])).push(o),!(n[a].length>1))return s=Math.max(s,o.method.length),i=Math.max(i,o.path.length),{method:o.method,path:o.path,routes:n[a]}}).forEach(o=>{if(!o)return;const{method:a,path:l,routes:f}=o,u=r?`\x1B[32m${a}\x1B[0m`:a;console.log(`${u} ${" ".repeat(s-a.length)} ${l}`)})};const Cn=e=>(e.status(404),e.render("404 Not Found")),An=Object.freeze(Object.defineProperty({__proto__:null,default:Cn},Symbol.toStringTag,{value:"Module"})),_n=(e,t)=>"getResponse"in e?e.getResponse():(console.error(e.message),t.status(500),t.render("Internal Server Error")),$n=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"}));var Cr={Stringify:1},F=(e,t)=>{const r=new String(e);return r.isEscaped=!0,r.callbacks=t,r},Mn=/[&<>'"]/,Ar=async(e,t)=>{let r="";t||(t=[]);const n=await Promise.all(e);for(let s=n.length-1;r+=n[s],s--,!(s<0);s--){let i=n[s];typeof i=="object"&&t.push(...i.callbacks||[]);const o=i.isEscaped;if(i=await(typeof i=="object"?i.toString():i),typeof i=="object"&&t.push(...i.callbacks||[]),i.isEscaped??o)r+=i;else{const a=[r];ue(i,a),r=a[0]}}return F(r,t)},ue=(e,t)=>{const r=e.search(Mn);if(r===-1){t[0]+=e;return}let n,s,i=0;for(s=r;s<e.length;s++){switch(e.charCodeAt(s)){case 34:n="&quot;";break;case 39:n="&#39;";break;case 38:n="&amp;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}t[0]+=e.substring(i,s)+n,i=s+1}t[0]+=e.substring(i,s)},_r=e=>{const t=e.callbacks;if(!(t!=null&&t.length))return e;const r=[e],n={};return t.forEach(s=>s({phase:Cr.Stringify,buffer:r,context:n})),r[0]},$r=async(e,t,r,n,s)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const i=e.callbacks;return i!=null&&i.length?(s?s[0]+=e:s=[e],Promise.all(i.map(a=>a({phase:t,buffer:s,context:n}))).then(a=>Promise.all(a.filter(Boolean).map(l=>$r(l,t,!1,n,s))).then(()=>s[0]))):Promise.resolve(e)},kn=(e,...t)=>{const r=[""];for(let n=0,s=e.length-1;n<s;n++){r[0]+=e[n];const i=Array.isArray(t[n])?t[n].flat(1/0):[t[n]];for(let o=0,a=i.length;o<a;o++){const l=i[o];if(typeof l=="string")ue(l,r);else if(typeof l=="number")r[0]+=l;else{if(typeof l=="boolean"||l===null||l===void 0)continue;if(typeof l=="object"&&l.isEscaped)if(l.callbacks)r.unshift("",l);else{const f=l.toString();f instanceof Promise?r.unshift("",f):r[0]+=f}else l instanceof Promise?r.unshift("",l):ue(l.toString(),r)}}}return r[0]+=e.at(-1),r.length===1?"callbacks"in r?F(_r(F(r[0],r.callbacks))):F(r[0]):Ar(r,r.callbacks)},Bt=Symbol("RENDERER"),$t=Symbol("ERROR_HANDLER"),C=Symbol("STASH"),Mr=Symbol("INTERNAL"),Nn=Symbol("MEMO"),ut=Symbol("PERMALINK"),Zt=e=>(e[Mr]=!0,e),kr=e=>({value:t,children:r})=>{if(!r)return;const n={children:[{tag:Zt(()=>{e.push(t)}),props:{}}]};Array.isArray(r)?n.children.push(...r.flat()):n.children.push(r),n.children.push({tag:Zt(()=>{e.pop()}),props:{}});const s={tag:"",props:n,type:""};return s[$t]=i=>{throw e.pop(),i},s},Nr=e=>{const t=[e],r=kr(t);return r.values=t,r.Provider=r,Me.push(r),r},Me=[],Wt=e=>{const t=[e],r=n=>{t.push(n.value);let s;try{s=n.children?(Array.isArray(n.children)?new Lr("",{},n.children):n.children).toString():""}finally{t.pop()}return s instanceof Promise?s.then(i=>F(i,i.callbacks)):F(s)};return r.values=t,r.Provider=r,r[Bt]=kr(t),Me.push(r),r},Re=e=>e.values.at(-1),nt={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},Mt={},st="data-precedence",Je=e=>Array.isArray(e)?e:[e],Xt=new WeakMap,Jt=(e,t,r,n)=>({buffer:s,context:i})=>{if(!s)return;const o=Xt.get(i)||{};Xt.set(i,o);const a=o[e]||(o[e]=[]);let l=!1;const f=nt[e];if(f.length>0){e:for(const[,u]of a)for(const h of f)if(((u==null?void 0:u[h])??null)===(r==null?void 0:r[h])){l=!0;break e}}if(l?s[0]=s[0].replaceAll(t,""):f.length>0?a.push([t,r,n]):a.unshift([t,r,n]),s[0].indexOf("</head>")!==-1){let u;if(n===void 0)u=a.map(([h])=>h);else{const h=[];u=a.map(([d,,p])=>{let y=h.indexOf(p);return y===-1&&(h.push(p),y=h.length-1),[d,y]}).sort((d,p)=>d[1]-p[1]).map(([d])=>d)}u.forEach(h=>{s[0]=s[0].replaceAll(h,"")}),s[0]=s[0].replace(/(?=<\/head>)/,u.join(""))}},Qe=(e,t,r)=>F(new q(e,r,Je(t??[])).toString()),Ye=(e,t,r,n)=>{if("itemProp"in r)return Qe(e,t,r);let{precedence:s,blocking:i,...o}=r;s=n?s??"":void 0,n&&(o[st]=s);const a=new q(e,o,Je(t||[])).toString();return a instanceof Promise?a.then(l=>F(a,[...l.callbacks||[],Jt(e,l,o,s)])):F(a,[Jt(e,a,o,s)])},Tn=({children:e,...t})=>{const r=Ut();if(r){const n=Re(r);if(n==="svg"||n==="head")return new q("title",t,Je(e??[]))}return Ye("title",e,t,!1)},Dn=({children:e,...t})=>{const r=Ut();return["src","async"].some(n=>!t[n])||r&&Re(r)==="head"?Qe("script",e,t):Ye("script",e,t,!1)},In=({children:e,...t})=>["href","precedence"].every(r=>r in t)?(t["data-href"]=t.href,delete t.href,Ye("style",e,t,!0)):Qe("style",e,t),Ln=({children:e,...t})=>["onLoad","onError"].some(r=>r in t)||t.rel==="stylesheet"&&(!("precedence"in t)||"disabled"in t)?Qe("link",e,t):Ye("link",e,t,"precedence"in t),Hn=({children:e,...t})=>{const r=Ut();return r&&Re(r)==="head"?Qe("meta",e,t):Ye("meta",e,t,!1)},Tr=(e,{children:t,...r})=>new q(e,r,Je(t??[])),Fn=e=>(typeof e.action=="function"&&(e.action=ut in e.action?e.action[ut]:void 0),Tr("form",e)),Dr=(e,t)=>(typeof t.formAction=="function"&&(t.formAction=ut in t.formAction?t.formAction[ut]:void 0),Tr(e,t)),Bn=e=>Dr("input",e),Wn=e=>Dr("button",e);const Et=Object.freeze(Object.defineProperty({__proto__:null,button:Wn,form:Fn,input:Bn,link:Ln,meta:Hn,script:Dn,style:In,title:Tn},Symbol.toStringTag,{value:"Module"}));var Un=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),ht=e=>Un.get(e)||e,Ir=(e,t)=>{for(const[r,n]of Object.entries(e)){const s=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`);t(s,n==null?null:typeof n=="number"?s.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${n}`:`${n}px`:n)}},Ue=void 0,Ut=()=>Ue,qn=e=>/[A-Z]/.test(e)&&e.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?e.replace(/([A-Z])/g,"-$1").toLowerCase():e,zn=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Kn=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],qt=(e,t)=>{for(let r=0,n=e.length;r<n;r++){const s=e[r];if(typeof s=="string")ue(s,t);else{if(typeof s=="boolean"||s===null||s===void 0)continue;s instanceof q?s.toStringToBuffer(t):typeof s=="number"||s.isEscaped?t[0]+=s:s instanceof Promise?t.unshift("",s):qt(s,t)}}},q=class{constructor(e,t,r){w(this,"tag");w(this,"props");w(this,"key");w(this,"children");w(this,"isEscaped",!0);w(this,"localContexts");this.tag=e,this.props=t,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){var t,r;const e=[""];(t=this.localContexts)==null||t.forEach(([n,s])=>{n.values.push(s)});try{this.toStringToBuffer(e)}finally{(r=this.localContexts)==null||r.forEach(([n])=>{n.values.pop()})}return e.length===1?"callbacks"in e?_r(F(e[0],e.callbacks)).toString():e[0]:Ar(e,e.callbacks)}toStringToBuffer(e){const t=this.tag,r=this.props;let{children:n}=this;e[0]+=`<${t}`;const s=Ue&&Re(Ue)==="svg"?i=>qn(ht(i)):i=>ht(i);for(let[i,o]of Object.entries(r))if(i=s(i),i!=="children"){if(i==="style"&&typeof o=="object"){let a="";Ir(o,(l,f)=>{f!=null&&(a+=`${a?";":""}${l}:${f}`)}),e[0]+=' style="',ue(a,e),e[0]+='"'}else if(typeof o=="string")e[0]+=` ${i}="`,ue(o,e),e[0]+='"';else if(o!=null)if(typeof o=="number"||o.isEscaped)e[0]+=` ${i}="${o}"`;else if(typeof o=="boolean"&&Kn.includes(i))o&&(e[0]+=` ${i}=""`);else if(i==="dangerouslySetInnerHTML"){if(n.length>0)throw"Can only set one of `children` or `props.dangerouslySetInnerHTML`.";n=[F(o.__html)]}else if(o instanceof Promise)e[0]+=` ${i}="`,e.unshift('"',o);else if(typeof o=="function"){if(!i.startsWith("on"))throw`Invalid prop '${i}' of type 'function' supplied to '${t}'.`}else e[0]+=` ${i}="`,ue(o.toString(),e),e[0]+='"'}if(zn.includes(t)&&n.length===0){e[0]+="/>";return}e[0]+=">",qt(n,e),e[0]+=`</${t}>`}},wt=class extends q{toStringToBuffer(e){const{children:t}=this,r=this.tag.call(null,{...this.props,children:t.length<=1?t[0]:t});if(!(typeof r=="boolean"||r==null))if(r instanceof Promise)if(Me.length===0)e.unshift("",r);else{const n=Me.map(s=>[s,s.values.at(-1)]);e.unshift("",r.then(s=>(s instanceof q&&(s.localContexts=n),s)))}else r instanceof q?r.toStringToBuffer(e):typeof r=="number"||r.isEscaped?(e[0]+=r,r.callbacks&&(e.callbacks||(e.callbacks=[]),e.callbacks.push(...r.callbacks))):ue(r,e)}},Lr=class extends q{toStringToBuffer(e){qt(this.children,e)}},kt=(e,t,...r)=>{t??(t={}),r.length&&(t.children=r.length===1?r[0]:r);const n=t.key;delete t.key;const s=it(e,t,r);return s.key=n,s},Qt=!1,it=(e,t,r)=>{if(!Qt){for(const n in Mt)Et[n][Bt]=Mt[n];Qt=!0}return typeof e=="function"?new wt(e,t,r):Et[e]?new wt(Et[e],t,r):e==="svg"||e==="head"?(Ue||(Ue=Wt("")),new q(e,t,[new wt(Ue,{value:e},r)])):new q(e,t,r)},gt=({children:e})=>new Lr("",{children:e},Array.isArray(e)?e:e?[e]:[]),Vn=e=>!!(e&&typeof e=="object"&&"tag"in e&&"props"in e);function R(e,t,r){let n;if(!t||!("children"in t))n=it(e,t,[]);else{const s=t.children;n=Array.isArray(s)?it(e,t,s):it(e,t,[s])}return n.key=r,n}var qe="_hp",Gn={Change:"Input",DoubleClick:"DblClick"},Zn={svg:"2000/svg",math:"1998/Math/MathML"},ke=[],Nt=new WeakMap,Ne=void 0,Xn=()=>Ne,Z=e=>"t"in e,bt={onClick:["click",!1]},Yt=e=>{if(!e.startsWith("on"))return;if(bt[e])return bt[e];const t=e.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(t){const[,r,n]=t;return bt[e]=[(Gn[r]||r).toLowerCase(),!!n]}},er=(e,t)=>Ne&&e instanceof SVGElement&&/[A-Z]/.test(t)&&(t in e.style||t.match(/^(?:o|pai|str|u|ve)/))?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,Jn=(e,t,r)=>{var n;t||(t={});for(let s in t){const i=t[s];if(s!=="children"&&(!r||r[s]!==i)){s=ht(s);const o=Yt(s);if(o){if((r==null?void 0:r[s])!==i&&(r&&e.removeEventListener(o[0],r[s],o[1]),i!=null)){if(typeof i!="function")throw new Error(`Event handler for "${s}" is not a function`);e.addEventListener(o[0],i,o[1])}}else if(s==="dangerouslySetInnerHTML"&&i)e.innerHTML=i.__html;else if(s==="ref"){let a;typeof i=="function"?a=i(e)||(()=>i(null)):i&&"current"in i&&(i.current=e,a=()=>i.current=null),Nt.set(e,a)}else if(s==="style"){const a=e.style;typeof i=="string"?a.cssText=i:(a.cssText="",i!=null&&Ir(i,a.setProperty.bind(a)))}else{if(s==="value"){const l=e.nodeName;if(l==="INPUT"||l==="TEXTAREA"||l==="SELECT"){if(e.value=i==null||i===!1?null:i,l==="TEXTAREA"){e.textContent=i;continue}else if(l==="SELECT"){e.selectedIndex===-1&&(e.selectedIndex=0);continue}}}else(s==="checked"&&e.nodeName==="INPUT"||s==="selected"&&e.nodeName==="OPTION")&&(e[s]=i);const a=er(e,s);i==null||i===!1?e.removeAttribute(a):i===!0?e.setAttribute(a,""):typeof i=="string"||typeof i=="number"?e.setAttribute(a,i):e.setAttribute(a,i.toString())}}}if(r)for(let s in r){const i=r[s];if(s!=="children"&&!(s in t)){s=ht(s);const o=Yt(s);o?e.removeEventListener(o[0],i,o[1]):s==="ref"?(n=Nt.get(e))==null||n():e.removeAttribute(er(e,s))}}},Qn=(e,t)=>{t[C][0]=0,ke.push([e,t]);const r=t.tag[Bt]||t.tag,n=r.defaultProps?{...r.defaultProps,...t.props}:t.props;try{return[r.call(null,n)]}finally{ke.pop()}},Hr=(e,t,r,n,s)=>{var i,o;(i=e.vR)!=null&&i.length&&(n.push(...e.vR),delete e.vR),typeof e.tag=="function"&&((o=e[C][1][He])==null||o.forEach(a=>s.push(a))),e.vC.forEach(a=>{var l;if(Z(a))r.push(a);else if(typeof a.tag=="function"||a.tag===""){a.c=t;const f=r.length;if(Hr(a,t,r,n,s),a.s){for(let u=f;u<r.length;u++)r[u].s=!0;a.s=!1}}else r.push(a),(l=a.vR)!=null&&l.length&&(n.push(...a.vR),delete a.vR)})},Yn=e=>{for(;;e=e.tag===qe||!e.vC||!e.pP?e.nN:e.vC[0]){if(!e)return null;if(e.tag!==qe&&e.e)return e.e}},Fr=e=>{var t,r,n,s,i,o;Z(e)||((r=(t=e[C])==null?void 0:t[1][He])==null||r.forEach(a=>{var l;return(l=a[2])==null?void 0:l.call(a)}),(n=Nt.get(e.e))==null||n(),e.p===2&&((s=e.vC)==null||s.forEach(a=>a.p=2)),(i=e.vC)==null||i.forEach(Fr)),e.p||((o=e.e)==null||o.remove(),delete e.e),typeof e.tag=="function"&&(Ie.delete(e),ot.delete(e),delete e[C][3],e.a=!0)},Br=(e,t,r)=>{e.c=t,Wr(e,t,r)},tr=(e,t)=>{if(t){for(let r=0,n=e.length;r<n;r++)if(e[r]===t)return r}},rr=Symbol(),Wr=(e,t,r)=>{var f;const n=[],s=[],i=[];Hr(e,t,n,s,i),s.forEach(Fr);const o=r?void 0:t.childNodes;let a,l=null;if(r)a=-1;else if(!o.length)a=0;else{const u=tr(o,Yn(e.nN));u!==void 0?(l=o[u],a=u):a=tr(o,(f=n.find(h=>h.tag!==qe&&h.e))==null?void 0:f.e)??-1,a===-1&&(r=!0)}for(let u=0,h=n.length;u<h;u++,a++){const d=n[u];let p;if(d.s&&d.e)p=d.e,d.s=!1;else{const y=r||!d.e;Z(d)?(d.e&&d.d&&(d.e.textContent=d.t),d.d=!1,p=d.e||(d.e=document.createTextNode(d.t))):(p=d.e||(d.e=d.n?document.createElementNS(d.n,d.tag):document.createElement(d.tag)),Jn(p,d.props,d.pP),Wr(d,p,y))}d.tag===qe?a--:r?p.parentNode||t.appendChild(p):o[a]!==p&&o[a-1]!==p&&(o[a+1]===p?t.appendChild(o[a]):t.insertBefore(p,l||o[a]||null))}if(e.pP&&delete e.pP,i.length){const u=[],h=[];i.forEach(([,d,,p,y])=>{d&&u.push(d),p&&h.push(p),y==null||y()}),u.forEach(d=>d()),h.length&&requestAnimationFrame(()=>{h.forEach(d=>d())})}},es=(e,t)=>!!(e&&e.length===t.length&&e.every((r,n)=>r[1]===t[n][1])),ot=new WeakMap,Tt=(e,t,r)=>{var i,o,a,l,f,u;const n=!r&&t.pC;r&&(t.pC||(t.pC=t.vC));let s;try{r||(r=typeof t.tag=="function"?Qn(e,t):Je(t.props.children)),((i=r[0])==null?void 0:i.tag)===""&&r[0][$t]&&(s=r[0][$t],e[5].push([e,s,t]));const h=n?[...t.pC]:t.vC?[...t.vC]:void 0,d=[];let p;for(let y=0;y<r.length;y++){Array.isArray(r[y])&&r.splice(y,1,...r[y].flat());let g=ts(r[y]);if(g){typeof g.tag=="function"&&!g.tag[Mr]&&(Me.length>0&&(g[C][2]=Me.map(m=>[m,m.values.at(-1)])),(o=e[5])!=null&&o.length&&(g[C][3]=e[5].at(-1)));let v;if(h&&h.length){const m=h.findIndex(Z(g)?b=>Z(b):g.key!==void 0?b=>b.key===g.key&&b.tag===g.tag:b=>b.tag===g.tag);m!==-1&&(v=h[m],h.splice(m,1))}if(v)if(Z(g))v.t!==g.t&&(v.t=g.t,v.d=!0),g=v;else{const m=v.pP=v.props;if(v.props=g.props,v.f||(v.f=g.f||t.f),typeof g.tag=="function"){const b=v[C][2];v[C][2]=g[C][2]||[],v[C][3]=g[C][3],!v.f&&((v.o||v)===g.o||(l=(a=v.tag)[Nn])!=null&&l.call(a,m,v.props))&&es(b,v[C][2])&&(v.s=!0)}g=v}else if(!Z(g)&&Ne){const m=Re(Ne);m&&(g.n=m)}if(!Z(g)&&!g.s&&(Tt(e,g),delete g.f),d.push(g),p&&!p.s&&!g.s)for(let m=p;m&&!Z(m);m=(f=m.vC)==null?void 0:f.at(-1))m.nN=g;p=g}}t.vR=n?[...t.vC,...h||[]]:h||[],t.vC=d,n&&delete t.pC}catch(h){if(t.f=!0,h===rr){if(s)return;throw h}const[d,p,y]=((u=t[C])==null?void 0:u[3])||[];if(p){const g=()=>at([0,!1,e[2]],y),v=ot.get(y)||[];v.push(g),ot.set(y,v);const m=p(h,()=>{const b=ot.get(y);if(b){const x=b.indexOf(g);if(x!==-1)return b.splice(x,1),g()}});if(m){if(e[0]===1)e[1]=!0;else if(Tt(e,y,[m]),(p.length===1||e!==d)&&y.c){Br(y,y.c,!1);return}throw rr}}throw h}finally{s&&e[5].pop()}},ts=e=>{if(!(e==null||typeof e=="boolean")){if(typeof e=="string"||typeof e=="number")return{t:e.toString(),d:!0};if("vR"in e&&(e={tag:e.tag,props:e.props,key:e.key,f:e.f,type:e.tag,ref:e.props.ref,o:e.o||e}),typeof e.tag=="function")e[C]=[0,[]];else{const t=Zn[e.tag];t&&(Ne||(Ne=Nr("")),e.props.children=[{tag:Ne,props:{value:e.n=`http://www.w3.org/${t}`,children:e.props.children}}])}return e}},nr=(e,t)=>{var r,n;(r=t[C][2])==null||r.forEach(([s,i])=>{s.values.push(i)});try{Tt(e,t,void 0)}catch{return}if(t.a){delete t.a;return}(n=t[C][2])==null||n.forEach(([s])=>{s.values.pop()}),(e[0]!==1||!e[1])&&Br(t,t.c,!1)},Ie=new WeakMap,sr=[],at=async(e,t)=>{e[5]||(e[5]=[]);const r=Ie.get(t);r&&r[0](void 0);let n;const s=new Promise(i=>n=i);if(Ie.set(t,[n,()=>{e[2]?e[2](e,t,i=>{nr(i,t)}).then(()=>n(t)):(nr(e,t),n(t))}]),sr.length)sr.at(-1).add(t);else{await Promise.resolve();const i=Ie.get(t);i&&(Ie.delete(t),i[1]())}return s},rs=(e,t,r)=>({tag:qe,props:{children:e},key:r,e:t,p:1}),xt=0,He=1,Ot=2,Rt=3,Pt=new WeakMap,zt=(e,t)=>!e||!t||e.length!==t.length||t.some((r,n)=>r!==e[n]),ns=void 0,ir=[],ie=e=>{var o;const t=()=>typeof e=="function"?e():e,r=ke.at(-1);if(!r)return[t(),()=>{}];const[,n]=r,s=(o=n[C][1])[xt]||(o[xt]=[]),i=n[C][0]++;return s[i]||(s[i]=[t(),a=>{const l=ns,f=s[i];if(typeof a=="function"&&(a=a(f[0])),!Object.is(a,f[0]))if(f[0]=a,ir.length){const[u,h]=ir.at(-1);Promise.all([u===3?n:at([u,!1,l],n),h]).then(([d])=>{if(!d||!(u===2||u===3))return;const p=d.vC;requestAnimationFrame(()=>{setTimeout(()=>{p===d.vC&&at([u===3?1:0,!1,l],d)})})})}else at([0,!1,l],n)}])},ss=(e,t,r)=>{var f;const n=ke.at(-1);if(!n)return;const[,s]=n,i=(f=s[C][1])[He]||(f[He]=[]),o=s[C][0]++,[a,,l]=i[o]||(i[o]=[]);if(zt(a,r)){l&&l();const u=()=>{h[e]=void 0,h[2]=t()},h=[r,void 0,void 0,void 0,void 0];h[e]=u,i[o]=h}},or=(e,t)=>ss(3,e,t),vt=(e,t)=>{var a;const r=ke.at(-1);if(!r)return e;const[,n]=r,s=(a=n[C][1])[Ot]||(a[Ot]=[]),i=n[C][0]++,o=s[i];return zt(o==null?void 0:o[1],t)?s[i]=[e,t]:e=s[i][0],e},is=e=>{const t=Pt.get(e);if(t){if(t.length===2)throw t[1];return t[0]}throw e.then(r=>Pt.set(e,[r]),r=>Pt.set(e,[void 0,r])),e},os=(e,t)=>{var a;const r=ke.at(-1);if(!r)return e();const[,n]=r,s=(a=n[C][1])[Rt]||(a[Rt]=[]),i=n[C][0]++,o=s[i];return zt(o==null?void 0:o[1],t)&&(s[i]=[e(),t]),s[i][0]},as=Nr({pending:!1,data:null,method:null,action:null}),ar=new Set,ls=e=>{ar.add(e),e.finally(()=>ar.delete(e))},Kt=(e,t)=>os(()=>r=>{let n;e&&(typeof e=="function"?n=e(r)||(()=>{e(null)}):e&&"current"in e&&(e.current=r,n=()=>{e.current=null}));const s=t(r);return()=>{s==null||s(),n==null||n()}},[e]),Pe=Object.create(null),tt=Object.create(null),et=(e,t,r,n,s)=>{if(t!=null&&t.itemProp)return{tag:e,props:t,type:e,ref:t.ref};const i=document.head;let{onLoad:o,onError:a,precedence:l,blocking:f,...u}=t,h=null,d=!1;const p=nt[e];let y;if(p.length>0){const b=i.querySelectorAll(e);e:for(const x of b)for(const P of nt[e])if(x.getAttribute(P)===t[P]){h=x;break e}if(!h){const x=p.reduce((P,j)=>t[j]===void 0?P:`${P}-${j}-${t[j]}`,e);d=!tt[x],h=tt[x]||(tt[x]=(()=>{const P=document.createElement(e);for(const j of p)t[j]!==void 0&&P.setAttribute(j,t[j]),t.rel&&P.setAttribute("rel",t.rel);return P})())}}else y=i.querySelectorAll(e);l=n?l??"":void 0,n&&(u[st]=l);const g=vt(b=>{if(p.length>0){let x=!1;for(const P of i.querySelectorAll(e)){if(x&&P.getAttribute(st)!==l){i.insertBefore(b,P);return}P.getAttribute(st)===l&&(x=!0)}i.appendChild(b)}else if(y){let x=!1;for(const P of y)if(P===b){x=!0;break}x||i.insertBefore(b,i.contains(y[0])?y[0]:i.querySelector(e)),y=void 0}},[l]),v=Kt(t.ref,b=>{var j;const x=p[0];if(r===2&&(b.innerHTML=""),(d||y)&&g(b),!a&&!o)return;let P=Pe[j=b.getAttribute(x)]||(Pe[j]=new Promise((K,V)=>{b.addEventListener("load",K),b.addEventListener("error",V)}));o&&(P=P.then(o)),a&&(P=P.catch(a)),P.catch(()=>{})});if(s&&f==="render"){const b=nt[e][0];if(t[b]){const x=t[b],P=Pe[x]||(Pe[x]=new Promise((j,K)=>{g(h),h.addEventListener("load",j),h.addEventListener("error",K)}));is(P)}}const m={tag:e,type:e,props:{...u,ref:v},ref:v};return m.p=r,h&&(m.e=h),rs(m,i)},cs=e=>{const t=Xn(),r=t&&Re(t);return r!=null&&r.endsWith("svg")?{tag:"title",props:e,type:"title",ref:e.ref}:et("title",e,void 0,!1,!1)},fs=e=>!e||["src","async"].some(t=>!e[t])?{tag:"script",props:e,type:"script",ref:e.ref}:et("script",e,1,!1,!0),us=e=>!e||!["href","precedence"].every(t=>t in e)?{tag:"style",props:e,type:"style",ref:e.ref}:(e["data-href"]=e.href,delete e.href,et("style",e,2,!0,!0)),hs=e=>!e||["onLoad","onError"].some(t=>t in e)||e.rel==="stylesheet"&&(!("precedence"in e)||"disabled"in e)?{tag:"link",props:e,type:"link",ref:e.ref}:et("link",e,1,"precedence"in e,!0),ds=e=>et("meta",e,void 0,!1,!1),Ur=Symbol(),ps=e=>{const{action:t,...r}=e;typeof t!="function"&&(r.action=t);const[n,s]=ie([null,!1]),i=vt(async f=>{const u=f.isTrusted?t:f.detail[Ur];if(typeof u!="function")return;f.preventDefault();const h=new FormData(f.target);s([h,!0]);const d=u(h);d instanceof Promise&&(ls(d),await d),s([null,!0])},[]),o=Kt(e.ref,f=>(f.addEventListener("submit",i),()=>{f.removeEventListener("submit",i)})),[a,l]=n;return n[1]=!1,{tag:as,props:{value:{pending:a!==null,data:a,method:a?"post":null,action:a?t:null},children:{tag:"form",props:{...r,ref:o},type:"form",ref:o}},f:l}},qr=(e,{formAction:t,...r})=>{if(typeof t=="function"){const n=vt(s=>{s.preventDefault(),s.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[Ur]:t}}))},[]);r.ref=Kt(r.ref,s=>(s.addEventListener("click",n),()=>{s.removeEventListener("click",n)}))}return{tag:e,props:r,type:e,ref:r.ref}},gs=e=>qr("input",e),vs=e=>qr("button",e);Object.assign(Mt,{title:cs,script:fs,style:us,link:hs,meta:ds,form:ps,input:gs,button:vs});new TextEncoder;var ms=Wt(null),ys=(e,t,r,n)=>(s,i)=>{const o="<!DOCTYPE html>",a=r?kt(f=>r(f,e),{Layout:t,...i},s):s,l=kn`${F(o)}${kt(ms.Provider,{value:e},a)}`;return e.html(l)},Es=(e,t)=>function(n,s){const i=n.getLayout()??gt;return e&&n.setLayout(o=>e({...o,Layout:i},n)),n.setRenderer(ys(n,i,e)),s()};const ws=Es(({children:e})=>R("html",{lang:"en",children:[R("head",{children:[R("meta",{charset:"utf-8"}),R("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),R("link",{rel:"icon",href:"/favicon.ico"}),R(xi,{href:"/app/style.css",rel:"stylesheet"}),R(bi,{src:"/app/client.ts",async:!0})]}),R("body",{children:e})]})),bs=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"}));var lr=(e,t,r)=>(n,s)=>{let i=-1;return o(0);async function o(a){if(a<=i)throw new Error("next() called multiple times");i=a;let l,f=!1,u;if(e[a]?(u=e[a][0][0],n.req.routeIndex=a):u=a===e.length&&s||void 0,u)try{l=await u(n,()=>o(a+1))}catch(h){if(h instanceof Error&&t)n.error=h,l=await t(h,n),f=!0;else throw h}else n.finalized===!1&&r&&(l=await r(n));return l&&(n.finalized===!1||f)&&(n.res=l),n}},xs=async(e,t=Object.create(null))=>{const{all:r=!1,dot:n=!1}=t,i=(e instanceof Jr?e.raw.headers:e.headers).get("Content-Type");return i!=null&&i.startsWith("multipart/form-data")||i!=null&&i.startsWith("application/x-www-form-urlencoded")?Os(e,{all:r,dot:n}):{}};async function Os(e,t){const r=await e.formData();return r?Rs(r,t):{}}function Rs(e,t){const r=Object.create(null);return e.forEach((n,s)=>{t.all||s.endsWith("[]")?Ps(r,s,n):r[s]=n}),t.dot&&Object.entries(r).forEach(([n,s])=>{n.includes(".")&&(Ss(r,n,s),delete r[n])}),r}var Ps=(e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:e[t]=r},Ss=(e,t,r)=>{let n=e;const s=t.split(".");s.forEach((i,o)=>{o===s.length-1?n[i]=r:((!n[i]||typeof n[i]!="object"||Array.isArray(n[i])||n[i]instanceof File)&&(n[i]=Object.create(null)),n=n[i])})},zr=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},js=e=>{const{groups:t,path:r}=Cs(e),n=zr(r);return As(n,t)},Cs=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(r,n)=>{const s=`@${n}`;return t.push([s,r]),s}),{groups:t,path:e}},As=(e,t)=>{for(let r=t.length-1;r>=0;r--){const[n]=t[r];for(let s=e.length-1;s>=0;s--)if(e[s].includes(n)){e[s]=e[s].replace(n,t[r][1]);break}}return e},rt={},cr=(e,t)=>{if(e==="*")return"*";const r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){const n=`${e}#${t}`;return rt[n]||(r[2]?rt[n]=t&&t[0]!==":"&&t[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:rt[n]=[e,r[1],!0]),rt[n]}return null},Kr=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},_s=e=>Kr(e,decodeURI),Vr=e=>{const t=e.url,r=t.indexOf("/",8);let n=r;for(;n<t.length;n++){const s=t.charCodeAt(n);if(s===37){const i=t.indexOf("?",n),o=t.slice(r,i===-1?void 0:i);return _s(o.includes("%25")?o.replace(/%25/g,"%2525"):o)}else if(s===63)break}return t.slice(r,n)},$s=e=>{const t=Vr(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},je=(e,t,...r)=>(r.length&&(t=je(t,...r)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),Gr=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;const t=e.split("/"),r=[];let n="";return t.forEach(s=>{if(s!==""&&!/\:/.test(s))n+="/"+s;else if(/\:/.test(s))if(/\?/.test(s)){r.length===0&&n===""?r.push("/"):r.push(n);const i=s.replace("?","");n+="/"+i,r.push(n)}else n+="/"+s}),r.filter((s,i,o)=>o.indexOf(s)===i)},St=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?Xr(e):e):e,Zr=(e,t,r)=>{let n;if(!r&&t&&!/[%+]/.test(t)){let o=e.indexOf(`?${t}`,8);for(o===-1&&(o=e.indexOf(`&${t}`,8));o!==-1;){const a=e.charCodeAt(o+t.length+1);if(a===61){const l=o+t.length+2,f=e.indexOf("&",l);return St(e.slice(l,f===-1?void 0:f))}else if(a==38||isNaN(a))return"";o=e.indexOf(`&${t}`,o+1)}if(n=/[%+]/.test(e),!n)return}const s={};n??(n=/[%+]/.test(e));let i=e.indexOf("?",8);for(;i!==-1;){const o=e.indexOf("&",i+1);let a=e.indexOf("=",i);a>o&&o!==-1&&(a=-1);let l=e.slice(i+1,a===-1?o===-1?void 0:o:a);if(n&&(l=St(l)),i=o,l==="")continue;let f;a===-1?f="":(f=e.slice(a+1,o===-1?void 0:o),n&&(f=St(f))),r?(s[l]&&Array.isArray(s[l])||(s[l]=[]),s[l].push(f)):s[l]??(s[l]=f)}return t?s[t]:s},Ms=Zr,ks=(e,t)=>Zr(e,t,!0),Xr=decodeURIComponent,fr=e=>Kr(e,Xr),Ce,B,re,Qr,Yr,Dt,oe,vr,Jr=(vr=class{constructor(e,t="/",r=[[]]){O(this,re);w(this,"raw");O(this,Ce);O(this,B);w(this,"routeIndex",0);w(this,"path");w(this,"bodyCache",{});O(this,oe,e=>{const{bodyCache:t,raw:r}=this,n=t[e];if(n)return n;const s=Object.keys(t)[0];return s?t[s].then(i=>(s==="json"&&(i=JSON.stringify(i)),new Response(i)[e]())):t[e]=r[e]()});this.raw=e,this.path=t,E(this,B,r),E(this,Ce,{})}param(e){return e?S(this,re,Qr).call(this,e):S(this,re,Yr).call(this)}query(e){return Ms(this.url,e)}queries(e){return ks(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((r,n)=>{t[n]=r}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await xs(this,e))}json(){return c(this,oe).call(this,"json")}text(){return c(this,oe).call(this,"text")}arrayBuffer(){return c(this,oe).call(this,"arrayBuffer")}blob(){return c(this,oe).call(this,"blob")}formData(){return c(this,oe).call(this,"formData")}addValidatedData(e,t){c(this,Ce)[e]=t}valid(e){return c(this,Ce)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get matchedRoutes(){return c(this,B)[0].map(([[,e]])=>e)}get routePath(){return c(this,B)[0].map(([[,e]])=>e)[this.routeIndex].path}},Ce=new WeakMap,B=new WeakMap,re=new WeakSet,Qr=function(e){const t=c(this,B)[0][this.routeIndex][1][e],r=S(this,re,Dt).call(this,t);return r?/\%/.test(r)?fr(r):r:void 0},Yr=function(){const e={},t=Object.keys(c(this,B)[0][this.routeIndex][1]);for(const r of t){const n=S(this,re,Dt).call(this,c(this,B)[0][this.routeIndex][1][r]);n&&typeof n=="string"&&(e[r]=/\%/.test(n)?fr(n):n)}return e},Dt=function(e){return c(this,B)[1]?c(this,B)[1][e]:e},oe=new WeakMap,vr),Ns="text/plain; charset=UTF-8",jt=(e,t={})=>{for(const r of Object.keys(t))e.set(r,t[r]);return e},ze,Ke,X,ye,J,_,$,z,Q,Ve,Ae,_e,Ge,Ze,I,H,mr,Ts=(mr=class{constructor(e,t){O(this,I);O(this,ze);O(this,Ke);w(this,"env",{});O(this,X);w(this,"finalized",!1);w(this,"error");O(this,ye,200);O(this,J);O(this,_);O(this,$);O(this,z);O(this,Q,!0);O(this,Ve);O(this,Ae);O(this,_e);O(this,Ge);O(this,Ze);w(this,"render",(...e)=>(c(this,Ae)??E(this,Ae,t=>this.html(t)),c(this,Ae).call(this,...e)));w(this,"setLayout",e=>E(this,Ve,e));w(this,"getLayout",()=>c(this,Ve));w(this,"setRenderer",e=>{E(this,Ae,e)});w(this,"header",(e,t,r)=>{if(t===void 0){c(this,_)?c(this,_).delete(e):c(this,$)&&delete c(this,$)[e.toLocaleLowerCase()],this.finalized&&this.res.headers.delete(e);return}r!=null&&r.append?(c(this,_)||(E(this,Q,!1),E(this,_,new Headers(c(this,$))),E(this,$,{})),c(this,_).append(e,t)):c(this,_)?c(this,_).set(e,t):(c(this,$)??E(this,$,{}),c(this,$)[e.toLowerCase()]=t),this.finalized&&(r!=null&&r.append?this.res.headers.append(e,t):this.res.headers.set(e,t))});w(this,"status",e=>{E(this,Q,!1),E(this,ye,e)});w(this,"set",(e,t)=>{c(this,X)??E(this,X,new Map),c(this,X).set(e,t)});w(this,"get",e=>c(this,X)?c(this,X).get(e):void 0);w(this,"newResponse",(...e)=>S(this,I,H).call(this,...e));w(this,"body",(e,t,r)=>typeof t=="number"?S(this,I,H).call(this,e,t,r):S(this,I,H).call(this,e,t));w(this,"text",(e,t,r)=>{if(!c(this,$)){if(c(this,Q)&&!r&&!t)return new Response(e);E(this,$,{})}return c(this,$)["content-type"]=Ns,typeof t=="number"?S(this,I,H).call(this,e,t,r):S(this,I,H).call(this,e,t)});w(this,"json",(e,t,r)=>{const n=JSON.stringify(e);return c(this,$)??E(this,$,{}),c(this,$)["content-type"]="application/json",typeof t=="number"?S(this,I,H).call(this,n,t,r):S(this,I,H).call(this,n,t)});w(this,"html",(e,t,r)=>(c(this,$)??E(this,$,{}),c(this,$)["content-type"]="text/html; charset=UTF-8",typeof e=="object"?$r(e,Cr.Stringify,!1,{}).then(n=>typeof t=="number"?S(this,I,H).call(this,n,t,r):S(this,I,H).call(this,n,t)):typeof t=="number"?S(this,I,H).call(this,e,t,r):S(this,I,H).call(this,e,t)));w(this,"redirect",(e,t)=>(c(this,_)??E(this,_,new Headers),c(this,_).set("Location",String(e)),this.newResponse(null,t??302)));w(this,"notFound",()=>(c(this,_e)??E(this,_e,()=>new Response),c(this,_e).call(this,this)));E(this,ze,e),t&&(E(this,J,t.executionCtx),this.env=t.env,E(this,_e,t.notFoundHandler),E(this,Ze,t.path),E(this,Ge,t.matchResult))}get req(){return c(this,Ke)??E(this,Ke,new Jr(c(this,ze),c(this,Ze),c(this,Ge))),c(this,Ke)}get event(){if(c(this,J)&&"respondWith"in c(this,J))return c(this,J);throw Error("This context has no FetchEvent")}get executionCtx(){if(c(this,J))return c(this,J);throw Error("This context has no ExecutionContext")}get res(){return E(this,Q,!1),c(this,z)||E(this,z,new Response("404 Not Found",{status:404}))}set res(e){if(E(this,Q,!1),c(this,z)&&e)try{for(const[t,r]of c(this,z).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const n=c(this,z).headers.getSetCookie();e.headers.delete("set-cookie");for(const s of n)e.headers.append("set-cookie",s)}else e.headers.set(t,r)}catch(t){if(t instanceof TypeError&&t.message.includes("immutable")){this.res=new Response(e.body,{headers:e.headers,status:e.status});return}else throw t}E(this,z,e),this.finalized=!0}get var(){return c(this,X)?Object.fromEntries(c(this,X)):{}}},ze=new WeakMap,Ke=new WeakMap,X=new WeakMap,ye=new WeakMap,J=new WeakMap,_=new WeakMap,$=new WeakMap,z=new WeakMap,Q=new WeakMap,Ve=new WeakMap,Ae=new WeakMap,_e=new WeakMap,Ge=new WeakMap,Ze=new WeakMap,I=new WeakSet,H=function(e,t,r){if(c(this,Q)&&!r&&!t&&c(this,ye)===200)return new Response(e,{headers:c(this,$)});if(t&&typeof t!="number"){const s=new Headers(t.headers);c(this,_)&&c(this,_).forEach((o,a)=>{a==="set-cookie"?s.append(a,o):s.set(a,o)});const i=jt(s,c(this,$));return new Response(e,{headers:i,status:t.status??c(this,ye)})}const n=typeof t=="number"?t:c(this,ye);c(this,$)??E(this,$,{}),c(this,_)??E(this,_,new Headers),jt(c(this,_),c(this,$)),c(this,z)&&(c(this,z).headers.forEach((s,i)=>{var o,a;i==="set-cookie"?(o=c(this,_))==null||o.append(i,s):(a=c(this,_))==null||a.set(i,s)}),jt(c(this,_),c(this,$))),r??(r={});for(const[s,i]of Object.entries(r))if(typeof i=="string")c(this,_).set(s,i);else{c(this,_).delete(s);for(const o of i)c(this,_).append(s,o)}return new Response(e,{status:n,headers:c(this,_)})},mr),M="ALL",Ds="all",Is=["get","post","put","delete","options","patch"],en="Can not add a route since the matcher is already built.",tn=class extends Error{},Ls=e=>e.text("404 Not Found",404),ur=(e,t)=>"getResponse"in e?e.getResponse():(console.error(e),t.text("Internal Server Error",500)),W,k,nn,Y,ve,lt,ct,yr,rn=(yr=class{constructor(t={}){O(this,k);w(this,"get");w(this,"post");w(this,"put");w(this,"delete");w(this,"options");w(this,"patch");w(this,"all");w(this,"on");w(this,"use");w(this,"router");w(this,"getPath");w(this,"_basePath","/");O(this,W,"/");w(this,"routes",[]);O(this,Y,Ls);w(this,"errorHandler",ur);w(this,"onError",t=>(this.errorHandler=t,this));w(this,"notFound",t=>(E(this,Y,t),this));w(this,"fetch",(t,...r)=>S(this,k,ct).call(this,t,r[1],r[0],t.method));w(this,"request",(t,r,n,s)=>t instanceof Request?this.fetch(r?new Request(t,r):t,n,s):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${je("/",t)}`,r),n,s)));w(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(S(this,k,ct).call(this,t.request,t,void 0,t.request.method))})});[...Is,Ds].forEach(i=>{this[i]=(o,...a)=>(typeof o=="string"?E(this,W,o):S(this,k,ve).call(this,i,c(this,W),o),a.forEach(l=>{S(this,k,ve).call(this,i,c(this,W),l)}),this)}),this.on=(i,o,...a)=>{for(const l of[o].flat()){E(this,W,l);for(const f of[i].flat())a.map(u=>{S(this,k,ve).call(this,f.toUpperCase(),c(this,W),u)})}return this},this.use=(i,...o)=>(typeof i=="string"?E(this,W,i):(E(this,W,"*"),o.unshift(i)),o.forEach(a=>{S(this,k,ve).call(this,M,c(this,W),a)}),this);const{strict:n,...s}=t;Object.assign(this,s),this.getPath=n??!0?t.getPath??Vr:$s}route(t,r){const n=this.basePath(t);return r.routes.map(s=>{var o;let i;r.errorHandler===ur?i=s.handler:(i=async(a,l)=>(await lr([],r.errorHandler)(a,()=>s.handler(a,l))).res,i[_t]=s.handler),S(o=n,k,ve).call(o,s.method,s.path,i)}),this}basePath(t){const r=S(this,k,nn).call(this);return r._basePath=je(this._basePath,t),r}mount(t,r,n){let s,i;n&&(typeof n=="function"?i=n:(i=n.optionHandler,s=n.replaceRequest));const o=i?l=>{const f=i(l);return Array.isArray(f)?f:[f]}:l=>{let f;try{f=l.executionCtx}catch{}return[l.env,f]};s||(s=(()=>{const l=je(this._basePath,t),f=l==="/"?0:l.length;return u=>{const h=new URL(u.url);return h.pathname=h.pathname.slice(f)||"/",new Request(h,u)}})());const a=async(l,f)=>{const u=await r(s(l.req.raw),...o(l));if(u)return u;await f()};return S(this,k,ve).call(this,M,je(t,"*"),a),this}},W=new WeakMap,k=new WeakSet,nn=function(){const t=new rn({router:this.router,getPath:this.getPath});return t.routes=this.routes,t},Y=new WeakMap,ve=function(t,r,n){t=t.toUpperCase(),r=je(this._basePath,r);const s={path:r,method:t,handler:n};this.router.add(t,r,[n,s]),this.routes.push(s)},lt=function(t,r){if(t instanceof Error)return this.errorHandler(t,r);throw t},ct=function(t,r,n,s){if(s==="HEAD")return(async()=>new Response(null,await S(this,k,ct).call(this,t,r,n,"GET")))();const i=this.getPath(t,{env:n}),o=this.router.match(s,i),a=new Ts(t,{path:i,matchResult:o,env:n,executionCtx:r,notFoundHandler:c(this,Y)});if(o[0].length===1){let f;try{f=o[0][0][0][0](a,async()=>{a.res=await c(this,Y).call(this,a)})}catch(u){return S(this,k,lt).call(this,u,a)}return f instanceof Promise?f.then(u=>u||(a.finalized?a.res:c(this,Y).call(this,a))).catch(u=>S(this,k,lt).call(this,u,a)):f??c(this,Y).call(this,a)}const l=lr(o[0],this.errorHandler,c(this,Y));return(async()=>{try{const f=await l(a);if(!f.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return f.res}catch(f){return S(this,k,lt).call(this,f,a)}})()},yr),dt="[^/]+",Fe=".*",Be="(?:|/.*)",Le=Symbol(),Hs=new Set(".\\+*[^]$()");function Fs(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===Fe||e===Be?1:t===Fe||t===Be?-1:e===dt?1:t===dt?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var Ee,we,U,Er,It=(Er=class{constructor(){O(this,Ee);O(this,we);O(this,U,Object.create(null))}insert(t,r,n,s,i){if(t.length===0){if(c(this,Ee)!==void 0)throw Le;if(i)return;E(this,Ee,r);return}const[o,...a]=t,l=o==="*"?a.length===0?["","",Fe]:["","",dt]:o==="/*"?["","",Be]:o.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let f;if(l){const u=l[1];let h=l[2]||dt;if(u&&l[2]&&(h=h.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(h)))throw Le;if(f=c(this,U)[h],!f){if(Object.keys(c(this,U)).some(d=>d!==Fe&&d!==Be))throw Le;if(i)return;f=c(this,U)[h]=new It,u!==""&&E(f,we,s.varIndex++)}!i&&u!==""&&n.push([u,c(f,we)])}else if(f=c(this,U)[o],!f){if(Object.keys(c(this,U)).some(u=>u.length>1&&u!==Fe&&u!==Be))throw Le;if(i)return;f=c(this,U)[o]=new It}f.insert(a,r,n,s,i)}buildRegExpStr(){const r=Object.keys(c(this,U)).sort(Fs).map(n=>{const s=c(this,U)[n];return(typeof c(s,we)=="number"?`(${n})@${c(s,we)}`:Hs.has(n)?`\\${n}`:n)+s.buildRegExpStr()});return typeof c(this,Ee)=="number"&&r.unshift(`#${c(this,Ee)}`),r.length===0?"":r.length===1?r[0]:"(?:"+r.join("|")+")"}},Ee=new WeakMap,we=new WeakMap,U=new WeakMap,Er),pt,Xe,wr,Bs=(wr=class{constructor(){O(this,pt,{varIndex:0});O(this,Xe,new It)}insert(e,t,r){const n=[],s=[];for(let o=0;;){let a=!1;if(e=e.replace(/\{[^}]+\}/g,l=>{const f=`@\\${o}`;return s[o]=[f,l],o++,a=!0,f}),!a)break}const i=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let o=s.length-1;o>=0;o--){const[a]=s[o];for(let l=i.length-1;l>=0;l--)if(i[l].indexOf(a)!==-1){i[l]=i[l].replace(a,s[o][1]);break}}return c(this,Xe).insert(i,t,n,c(this,pt),r),n}buildRegExp(){let e=c(this,Xe).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const r=[],n=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(s,i,o)=>i!==void 0?(r[++t]=Number(i),"$()"):(o!==void 0&&(n[Number(o)]=++t),"")),[new RegExp(`^${e}`),r,n]}},pt=new WeakMap,Xe=new WeakMap,wr),sn=[],Ws=[/^$/,[],Object.create(null)],ft=Object.create(null);function on(e){return ft[e]??(ft[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`))}function Us(){ft=Object.create(null)}function qs(e){var f;const t=new Bs,r=[];if(e.length===0)return Ws;const n=e.map(u=>[!/\*|\/:/.test(u[0]),...u]).sort(([u,h],[d,p])=>u?1:d?-1:h.length-p.length),s=Object.create(null);for(let u=0,h=-1,d=n.length;u<d;u++){const[p,y,g]=n[u];p?s[y]=[g.map(([m])=>[m,Object.create(null)]),sn]:h++;let v;try{v=t.insert(y,h,p)}catch(m){throw m===Le?new tn(y):m}p||(r[h]=g.map(([m,b])=>{const x=Object.create(null);for(b-=1;b>=0;b--){const[P,j]=v[b];x[P]=j}return[m,x]}))}const[i,o,a]=t.buildRegExp();for(let u=0,h=r.length;u<h;u++)for(let d=0,p=r[u].length;d<p;d++){const y=(f=r[u][d])==null?void 0:f[1];if(!y)continue;const g=Object.keys(y);for(let v=0,m=g.length;v<m;v++)y[g[v]]=a[y[g[v]]]}const l=[];for(const u in o)l[u]=r[o[u]];return[i,l,s]}function Se(e,t){if(e){for(const r of Object.keys(e).sort((n,s)=>s.length-n.length))if(on(r).test(t))return[...e[r]]}}var ae,le,Te,an,ln,br,zs=(br=class{constructor(){O(this,Te);w(this,"name","RegExpRouter");O(this,ae);O(this,le);E(this,ae,{[M]:Object.create(null)}),E(this,le,{[M]:Object.create(null)})}add(e,t,r){var a;const n=c(this,ae),s=c(this,le);if(!n||!s)throw new Error(en);n[e]||[n,s].forEach(l=>{l[e]=Object.create(null),Object.keys(l[M]).forEach(f=>{l[e][f]=[...l[M][f]]})}),t==="/*"&&(t="*");const i=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const l=on(t);e===M?Object.keys(n).forEach(f=>{var u;(u=n[f])[t]||(u[t]=Se(n[f],t)||Se(n[M],t)||[])}):(a=n[e])[t]||(a[t]=Se(n[e],t)||Se(n[M],t)||[]),Object.keys(n).forEach(f=>{(e===M||e===f)&&Object.keys(n[f]).forEach(u=>{l.test(u)&&n[f][u].push([r,i])})}),Object.keys(s).forEach(f=>{(e===M||e===f)&&Object.keys(s[f]).forEach(u=>l.test(u)&&s[f][u].push([r,i]))});return}const o=Gr(t)||[t];for(let l=0,f=o.length;l<f;l++){const u=o[l];Object.keys(s).forEach(h=>{var d;(e===M||e===h)&&((d=s[h])[u]||(d[u]=[...Se(n[h],u)||Se(n[M],u)||[]]),s[h][u].push([r,i-f+l+1]))})}}match(e,t){Us();const r=S(this,Te,an).call(this);return this.match=(n,s)=>{const i=r[n]||r[M],o=i[2][s];if(o)return o;const a=s.match(i[0]);if(!a)return[[],sn];const l=a.indexOf("",1);return[i[1][l],a]},this.match(e,t)}},ae=new WeakMap,le=new WeakMap,Te=new WeakSet,an=function(){const e=Object.create(null);return Object.keys(c(this,le)).concat(Object.keys(c(this,ae))).forEach(t=>{e[t]||(e[t]=S(this,Te,ln).call(this,t))}),E(this,ae,E(this,le,void 0)),e},ln=function(e){const t=[];let r=e===M;return[c(this,ae),c(this,le)].forEach(n=>{const s=n[e]?Object.keys(n[e]).map(i=>[i,n[e][i]]):[];s.length!==0?(r||(r=!0),t.push(...s)):e!==M&&t.push(...Object.keys(n[M]).map(i=>[i,n[M][i]]))}),r?qs(t):null},br),ce,ee,xr,Ks=(xr=class{constructor(e){w(this,"name","SmartRouter");O(this,ce,[]);O(this,ee,[]);E(this,ce,e.routers)}add(e,t,r){if(!c(this,ee))throw new Error(en);c(this,ee).push([e,t,r])}match(e,t){if(!c(this,ee))throw new Error("Fatal error");const r=c(this,ce),n=c(this,ee),s=r.length;let i=0,o;for(;i<s;i++){const a=r[i];try{for(let l=0,f=n.length;l<f;l++)a.add(...n[l]);o=a.match(e,t)}catch(l){if(l instanceof tn)continue;throw l}this.match=a.match.bind(a),E(this,ce,[a]),E(this,ee,void 0);break}if(i===s)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,o}get activeRouter(){if(c(this,ee)||c(this,ce).length!==1)throw new Error("No active router has been determined yet.");return c(this,ce)[0]}},ce=new WeakMap,ee=new WeakMap,xr),De=Object.create(null),fe,D,be,$e,T,te,me,Or,cn=(Or=class{constructor(e,t,r){O(this,te);O(this,fe);O(this,D);O(this,be);O(this,$e,0);O(this,T,De);if(E(this,D,r||Object.create(null)),E(this,fe,[]),e&&t){const n=Object.create(null);n[e]={handler:t,possibleKeys:[],score:0},E(this,fe,[n])}E(this,be,[])}insert(e,t,r){E(this,$e,++Gt(this,$e)._);let n=this;const s=js(t),i=[];for(let l=0,f=s.length;l<f;l++){const u=s[l],h=s[l+1],d=cr(u,h),p=Array.isArray(d)?d[0]:u;if(Object.keys(c(n,D)).includes(p)){n=c(n,D)[p];const y=cr(u,h);y&&i.push(y[1]);continue}c(n,D)[p]=new cn,d&&(c(n,be).push(d),i.push(d[1])),n=c(n,D)[p]}const o=Object.create(null),a={handler:r,possibleKeys:i.filter((l,f,u)=>u.indexOf(l)===f),score:c(this,$e)};return o[e]=a,c(n,fe).push(o),n}search(e,t){var a;const r=[];E(this,T,De);let s=[this];const i=zr(t),o=[];for(let l=0,f=i.length;l<f;l++){const u=i[l],h=l===f-1,d=[];for(let p=0,y=s.length;p<y;p++){const g=s[p],v=c(g,D)[u];v&&(E(v,T,c(g,T)),h?(c(v,D)["*"]&&r.push(...S(this,te,me).call(this,c(v,D)["*"],e,c(g,T))),r.push(...S(this,te,me).call(this,v,e,c(g,T)))):d.push(v));for(let m=0,b=c(g,be).length;m<b;m++){const x=c(g,be)[m],P=c(g,T)===De?{}:{...c(g,T)};if(x==="*"){const A=c(g,D)["*"];A&&(r.push(...S(this,te,me).call(this,A,e,c(g,T))),E(A,T,P),d.push(A));continue}if(u==="")continue;const[j,K,V]=x,L=c(g,D)[j],mt=i.slice(l).join("/");if(V instanceof RegExp){const A=V.exec(mt);if(A){if(P[K]=A[0],r.push(...S(this,te,me).call(this,L,e,c(g,T),P)),Object.keys(c(L,D)).length){E(L,T,P);const N=((a=A[0].match(/\//))==null?void 0:a.length)??0;(o[N]||(o[N]=[])).push(L)}continue}}(V===!0||V.test(u))&&(P[K]=u,h?(r.push(...S(this,te,me).call(this,L,e,P,c(g,T))),c(L,D)["*"]&&r.push(...S(this,te,me).call(this,c(L,D)["*"],e,P,c(g,T)))):(E(L,T,P),d.push(L)))}}s=d.concat(o.shift()??[])}return r.length>1&&r.sort((l,f)=>l.score-f.score),[r.map(({handler:l,params:f})=>[l,f])]}},fe=new WeakMap,D=new WeakMap,be=new WeakMap,$e=new WeakMap,T=new WeakMap,te=new WeakSet,me=function(e,t,r,n){const s=[];for(let i=0,o=c(e,fe).length;i<o;i++){const a=c(e,fe)[i],l=a[t]||a[M],f={};if(l!==void 0&&(l.params=Object.create(null),s.push(l),r!==De||n&&n!==De))for(let u=0,h=l.possibleKeys.length;u<h;u++){const d=l.possibleKeys[u],p=f[l.score];l.params[d]=n!=null&&n[d]&&!p?n[d]:r[d]??(n==null?void 0:n[d]),f[l.score]=!0}}return s},Or),xe,Rr,Vs=(Rr=class{constructor(){w(this,"name","TrieRouter");O(this,xe);E(this,xe,new cn)}add(e,t,r){const n=Gr(t);if(n){for(let s=0,i=n.length;s<i;s++)c(this,xe).insert(e,n[s],r);return}c(this,xe).insert(e,t,r)}match(e,t){return c(this,xe).search(e,t)}},xe=new WeakMap,Rr),We=class extends rn{constructor(e={}){super(e),this.router=e.router??new Ks({routers:[new zs,new Vs]})}},Oe,Pr,Gs=(Pr=class{constructor(e){w(this,"initApp");O(this,Oe);w(this,"createApp",e=>{const t=new We(e&&c(this,Oe)?{...c(this,Oe),...e}:e??c(this,Oe));return this.initApp&&this.initApp(t),t});w(this,"createMiddleware",e=>e);w(this,"createHandlers",(...e)=>e.filter(t=>t!==void 0));this.initApp=e==null?void 0:e.initApp,E(this,Oe,e==null?void 0:e.defaultAppOptions)}},Oe=new WeakMap,Pr),Zs=e=>new Gs(e),Xs=e=>e;const Js=Zs(),Qs=Js.createHandlers,Ys="component-name",ei="component-export",ti="data-serialized-props",ri="data-hono-template",he="__importing_islands",Lt=Symbol(),Ht=Symbol(),Ct=Wt({[Lt]:!1,[Ht]:!1}),fn=e=>Array.isArray(e)?e.some(fn):typeof e=="object"&&Vn(e),un=({componentName:e,componentExport:t,Component:r,props:n})=>{const s={},i={};for(const a in n){const l=n[a];fn(l)?s[a]=l:i[a]=l}const o=Re(Ct);return o[Ht]||!o[Lt]?R("honox-island",{[Ys]:e,[ei]:t||void 0,[ti]:JSON.stringify(i),children:[R(Ct.Provider,{value:{...o,[Lt]:!0},children:R(r,{...n})}),Object.entries(s).map(([a,l])=>kt("template",{[ri]:a,key:a},R(Ct.Provider,{value:{...o,[Ht]:!0},children:l})))]}):R(r,{...n})},ni=function({onAddCat:e}){const[t,r]=ie(!1),[n,s]=ie([]),[i,o]=ie([]),[a,l]=ie(!1),[f,u]=ie(!1);or(()=>{r(!0)},[]);const h=vt((p=!0)=>{u(!0),setTimeout(()=>u(!1),1e3);const y={id:`${Date.now()}-${Math.random()}`,top:Math.random()*90,left:Math.random()*90};s(v=>[...v,y]);const g=`${Date.now()}-${Math.random()}`;o(v=>[...v,{id:g,top:y.top,left:y.left}]),setTimeout(()=>{o(v=>v.filter(m=>m.id!==g))},1e3),p&&e&&e();try{new Audio("/sounds/meow.mp3").play().catch(m=>console.error("Error playing sound:",m))}catch(v){console.error("Error creating Audio object:",v)}},[e]);or(()=>{let p;return a&&(p=setInterval(()=>{h(!1)},50)),()=>{p&&clearInterval(p)}},[a,h]);function d(){l(!a)}return R("div",{children:[R("div",{class:"fixed inset-0 pointer-events-none z-40",children:[n.map(p=>R("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Cat03.jpg/160px-Cat03.jpg",alt:"Cute cat",class:`w-20 h-20 object-cover rounded-lg shadow hover:scale-110 transition-transform duration-300 absolute ${f?"dancing":""}`,style:{top:`${p.top}%`,left:`${p.left}%`}},p.id)),t&&(()=>{const p=[];for(const y of i)for(let g=0;g<12;g++){const v=g/12*2*Math.PI,m=80+Math.random()*40,b=Math.cos(v)*m,x=Math.sin(v)*m;p.push(R("span",{class:"absolute text-2xl",style:{top:`${y.top}%`,left:`${y.left}%`,transform:"translate(-50%, -50%)",animation:"explode 1s ease-out forwards","--x":`${b}px`,"--y":`${x}px`},children:"🐱"},`${y.id}-${g}`))}return p})()]}),R("div",{class:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 flex space-x-4",children:[R("button",{type:"button",class:"px-4 py-2 bg-pink-400 hover:bg-pink-500 text-white rounded-full cursor-pointer transition-colors duration-200",onClick:()=>h(!0),children:"Add a Cat 🐾"}),R("button",{type:"button",class:`px-4 py-2 rounded-full cursor-pointer transition-colors duration-200 ${a?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,onClick:d,children:a?"Stop Auto 🛑":"Start Auto ✨"})]})]})},si=function(e){return R(un,{componentName:"/app/islands/counter.tsx",Component:ni,props:e})},hr=["Whiskers","Mittens","Shadow","Luna","Simba","Chloe","Oliver","Bella","Leo","Nala"],dr=["Time spent with cats is never wasted.","Cats rule the world. We just live in it.","Home is where the cat is.","In ancient times cats were worshipped as gods; they have not forgotten this.","Cats leave paw prints on your heart."],ii=function(){const[e,t]=ie("Hono"),[r,n]=ie(dr[Math.floor(Math.random()*dr.length)]);function s(){const i=hr[Math.floor(Math.random()*hr.length)];t(i)}return R("div",{class:"py-8 text-center space-y-6 bg-yellow-50 min-h-screen",children:[R("title",{children:"Cat Zone"}),R("h1",{class:"text-4xl font-bold",children:["🐱 Welcome to the Cat Zone, ",e,"! 🐾"]}),R("p",{class:"text-lg italic text-purple-600",children:r}),R("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Cat03.jpg/320px-Cat03.jpg",alt:"Adorable cat",class:"mx-auto rounded-lg shadow-lg hover:scale-105 transition-transform duration-300"}),R("p",{class:"text-md mt-4",children:"Enjoy your stay with the kitties! 😸"}),R(si,{onAddCat:s})]})},oi=function(e){return R(un,{componentName:"/app/islands/CatPage.tsx",Component:ii,props:e})},ai=Qs(e=>(e.req.query("name"),e.render(R(oi,{})))),li=!0,ci=Object.freeze(Object.defineProperty({__proto__:null,__importing_islands:li,default:ai},Symbol.toStringTag,{value:"Module"})),hn=new On,pr=e=>(e=e.replace(/\.tsx?$/g,"").replace(/\.mdx?$/g,"").replace(/^\/?index$/,"/").replace(/\/index$/,"").replace(/\[\.{3}.+\]/,"*").replace(/\[(.+?)\]/g,":$1"),/^\//.test(e)?e:"/"+e),At=e=>{const t={};for(const[r,n]of Object.entries(e)){const s=r.split("/"),i=s.pop(),o=s.join("/");t[o]||(t[o]={}),i&&(t[o][i]=n)}for(const[r,n]of Object.entries(t)){const s=Object.entries(n).sort(([i],[o])=>i[0]==="["&&o[0]!=="["?1:i[0]!=="["&&o[0]==="["?-1:i.localeCompare(o));t[r]=Object.fromEntries(s)}return t},fi=e=>Object.keys(e).sort((r,n)=>{const s=r.split("/").length,i=n.split("/").length;return s-i||n.localeCompare(r)}).map(r=>({[r]:e[r]})),ui=e=>{const t={};for(const n of Object.keys(e)){const s=n.split("/");s.pop();const i=s.join("/");t[i]||(t[i]=[]),t[i].includes(n)||t[i].push(n)}const r=Object.keys(t).sort((n,s)=>s.length-n.length);for(const n of r)for(const s of r)if(s.startsWith(n)&&s!==n){const i=new Set([...t[s],...t[n]]);t[s]=[...i]}return t},dn="_404.tsx",hi="_error.tsx",di=["GET","POST","PUT","DELETE","OPTIONS","PATCH"],pi=e=>{const t=e.root,r=new RegExp(`^${t}`),n=v=>pr(v.replace(r,"")),s=new We;s.use(async function(m,b){await hn.run(m,()=>b())});const i=e.NOT_FOUND,o=At(i),a=e.ERROR,l=At(a),f=e.RENDERER,u=ui(f),h=e.MIDDLEWARE,d=e.ROUTES,p=fi(At(d)),y=(v,m)=>{let b=m[v]??[];const x=j=>(b=m[j.join("/")],b||(j.pop(),j.length&&x(j)),b??[]),P=v.split("/");return b=x(P),b.sort((j,K)=>j.split("/").length-K.split("/").length),b},g={};for(const v of p)for(const[m,b]of Object.entries(v)){const x=new We;let P=!1;const j=gi(m,o);j&&x.use(async(A,N)=>{if(await N(),A.res.status===404){const de=await j(A),G=new Response(de.body,{status:404,headers:de.headers});A.res=G}}),y(m,u).map(A=>{const N=f[A];N[he]&&(P=!0);const G=N.default;G&&x.all("*",G)});const V=Object.keys(h).find(A=>{const N=m.replaceAll("[","\\[").replace("]","\\]");return new RegExp(N+"/_middleware.tsx?").test(A)});if(V){const A=h[V];A.default&&x.use(...A.default)}for(const[A,N]of Object.entries(b)){const de=N[he],G=Xs(async function(se,wn){se.set(he,de?!0:P),await wn()}),ne=N.default,pe=pr(A);ne&&"fetch"in ne&&(x.use(G),x.route(pe,ne));for(const ge of di){const se=N[ge];se&&(x.on(ge,pe,G),x.on(ge,pe,...se))}ne&&Array.isArray(ne)&&(x.get(pe,G),x.get(pe,...ne)),typeof ne=="function"&&(x.get(pe,G),x.get(pe,async ge=>{const se=await ne(ge);return se instanceof Response?se:ge.render(se,N)}))}const L=mi(m,l);L&&(g[m]=L);for(const[A,N]of Object.entries(g))new RegExp(`^${A}`).test(m)&&N&&x.onError(N);let mt=n(m);s.route(mt,x)}for(const v of p.reverse()){const m=Object.entries(v)[0][0],b=new We;vi(b,m,o);const x=n(m);s.route(x,b)}return s};function gi(e,t){for(const[r,n]of Object.entries(t))if(e===r){const s=n[dn];if(s)return s.default}}function vi(e,t,r){for(const[n,s]of Object.entries(r))if(t===n){const i=s[dn];if(i){const o=i.default;i[he]&&e.use("*",(l,f)=>(l.set(he,!0),f())),e.get("*",l=>(l.status(404),o(l)))}}}function mi(e,t){for(const[r,n]of Object.entries(t))if(e===r){const s=n[hi];if(s){const i=s.default;if(i)return async(a,l)=>{const f=s[he];return f&&l.set(he,f),l.status(500),i(a,l)}}}}const yi=e=>pi({root:"/app/routes",NOT_FOUND:Object.assign({"/app/routes/_404.tsx":An}),ERROR:Object.assign({"/app/routes/_error.tsx":$n}),RENDERER:Object.assign({"/app/routes/_renderer.tsx":bs}),MIDDLEWARE:Object.assign({}),ROUTES:Object.assign({"/app/routes/index.tsx":ci})}),Ei=({children:e})=>{const t=hn.getStore();if(!t)throw new Error("No context found");return R(gt,{children:t.get(he)&&e})},wi={"app/client.ts":{file:"static/client-CxPQ2fZf.js",name:"client",src:"app/client.ts",isEntry:!0,dynamicImports:["app/islands/CatPage.tsx","app/islands/counter.tsx","node_modules/.deno/honox@0.1.39/node_modules/honox/dist/client/runtime.js","node_modules/.deno/honox@0.1.39/node_modules/honox/dist/client/runtime.js"]},"app/islands/CatPage.tsx":{file:"static/CatPage-DhsJ5K0w.js",name:"CatPage",src:"app/islands/CatPage.tsx",isDynamicEntry:!0,imports:["app/client.ts","app/islands/counter.tsx"]},"app/islands/counter.tsx":{file:"static/counter-rWKT4Zqi.js",name:"counter",src:"app/islands/counter.tsx",isDynamicEntry:!0,imports:["app/client.ts"]},"app/style.css":{file:"static/style-CmBfp-pJ.css",src:"app/style.css",isEntry:!0},"node_modules/.deno/honox@0.1.39/node_modules/honox/dist/client/runtime.js":{file:"static/runtime-BG4WtC-G.js",name:"runtime",src:"node_modules/.deno/honox@0.1.39/node_modules/honox/dist/client/runtime.js",isDynamicEntry:!0,imports:["app/client.ts"]}},pn=Object.freeze(Object.defineProperty({__proto__:null,default:wi},Symbol.toStringTag,{value:"Module"})),gn=e=>e.endsWith("/")?e:e+"/",bi=e=>{const t=e.src;if(e.prod??!0){let r=e.manifest;if(!r){const n=Object.assign({"/dist/.vite/manifest.json":pn});for(const[,s]of Object.entries(n))if(s.default){r=s.default;break}}if(r){const n=r[t.replace(/^\//,"")];if(n)return R(Ei,{children:R("script",{type:"module",async:!!e.async,src:`${gn("/")}${n.file}`,nonce:e.nonce})})}return R(gt,{})}else return R("script",{type:"module",async:!!e.async,src:t,nonce:e.nonce})},xi=e=>{let{href:t,prod:r,manifest:n,...s}=e;if(t)if(r??!0){if(!n){const i=Object.assign({"/dist/.vite/manifest.json":pn});for(const[,o]of Object.entries(i))if(o.default){n=o.default;break}}if(n){const i=n[t.replace(/^\//,"")];if(i)return t.startsWith("/")?R("link",{href:`${gn("/")}${i.file}`,...s}):R("link",{href:i.file,...s})}return R(gt,{})}else return R("link",{href:t,...s});return R("link",{...s})},vn=yi();jn(vn);const Ft=new We,mn=Object.assign({"/app/server.ts":vn});let yn=!1;for(const[,e]of Object.entries(mn))e&&(Ft.all("*",t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),Ft.notFound(t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),yn=!0);if(!yn)throw new Error("Can't import modules from ['/src/index.ts','/src/index.tsx','/app/server.ts']");const En={},gr=new Set;for(const[e,t]of Object.entries(mn))for(const[r,n]of Object.entries(t))if(r!=="fetch"){if(gr.has(r))throw new Error(`Handler "${r}" is defined in multiple entry files. Please ensure each handler (except fetch) is defined only once.`);gr.add(r),En[r]=n}const ji={...En,fetch:Ft.fetch};export{ji as default};
